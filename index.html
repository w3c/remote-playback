<!DOCTYPE html><html lang="en-US"><head>
<meta charset="UTF-8">
<meta name="generator" content="ReSpec 35.0.2">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
span.example-title{text-transform:none}
:is(aside,div).example,div.illegal-example{padding:.5em;margin:1em 0;position:relative;clear:both}
div.illegal-example{color:red}
div.illegal-example p{color:#000}
aside.example div.example{border-left-width:.1em;border-color:#999;background:#fff}
</style>
<style>
.issue-label{text-transform:initial}
.warning>p:first-child{margin-top:0}
.warning{padding:.5em;border-left-width:.5em;border-left-style:solid}
span.warning{padding:.1em .5em .15em}
.issue.closed span.issue-number{text-decoration:line-through}
.issue.closed span.issue-number::after{content:" (Closed)";font-size:smaller}
.warning{border-color:#f11;border-color:var(--warning-border,#f11);border-width:.2em;border-style:solid;background:#fbe9e9;background:var(--warning-bg,#fbe9e9);color:#000;color:var(--text,#000)}
.warning-title:before{content:"⚠";font-size:1.3em;float:left;padding-right:.3em;margin-top:-.3em}
li.task-list-item{list-style:none}
input.task-list-item-checkbox{margin:0 .35em .25em -1.6em;vertical-align:middle}
.issue a.respec-gh-label{padding:5px;margin:0 2px 0 2px;font-size:10px;text-transform:none;text-decoration:none;font-weight:700;border-radius:4px;position:relative;bottom:2px;border:none;display:inline-block}
</style>
<style>
pre.idl{padding:1em;position:relative}
pre.idl>code{color:#000;color:var(--text,#000)}
@media print{
pre.idl{white-space:pre-wrap}
}
.idlHeader{display:block;width:150px;background:#8ccbf2;background:var(--def-border,#8ccbf2);color:#fff;color:var(--defrow-border,#fff);font-family:sans-serif;font-weight:700;margin:-1em 0 1em -1em;height:28px;line-height:28px}
.idlHeader a.self-link{margin-left:.3cm;text-decoration:none;border-bottom:none;color:inherit}
.idlID{font-weight:700;color:#005a9c}
.idlType{color:#005a9c}
.idlName{color:#ff4500}
.idlName a{color:#ff4500;border-bottom:1px dotted #ff4500;text-decoration:none}
a.idlEnumItem{color:#000;border-bottom:1px dotted #ccc;text-decoration:none}
.idlSuperclass{font-style:italic;color:#005a9c}
.idlDefaultValue,.idlParamName{font-style:italic}
.extAttr{color:#666}
.idlSectionComment{color:gray}
.idlIncludes a{font-weight:700}
.respec-button-copy-paste:focus{text-decoration:none;border-color:#51a7e8;outline:0;box-shadow:0 0 5px rgba(81,167,232,.5)}
.respec-button-copy-paste:is(:focus:hover,.selected:focus){border-color:#51a7e8}
.respec-button-copy-paste:is(:hover,:active,.zeroclipboard-is-hover,.zeroclipboard-is-active){text-decoration:none;background-color:#ddd;background-image:linear-gradient(#eee,#ddd);border-color:#ccc}
.respec-button-copy-paste:is(:active,.selected,.zeroclipboard-is-active){background-color:#dcdcdc;background-image:none;border-color:#b5b5b5;box-shadow:inset 0 2px 4px rgba(0,0,0,.15)}
.respec-button-copy-paste.selected:hover{background-color:#cfcfcf}
.respec-button-copy-paste:is(:disabled,:disabled:hover,.disabled,.disabled:hover){color:rgba(102,102,102,.5);cursor:default;background-color:rgba(229,229,229,.5);background-image:none;border-color:rgba(197,197,197,.5);box-shadow:none}
@media print{
.respec-button-copy-paste{visibility:hidden}
}
</style>
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font-family:"Helvetica Neue",sans-serif;font-size:small;background:#fff;background:var(--indextable-hover-bg,#fff);color:#000;color:var(--text,#000);box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);box-shadow:0 1em 3em -.4em var(--tocsidebar-shadow,rgba(0,0,0,.3)),0 0 1px 1px var(--tocsidebar-shadow,rgba(0,0,0,.05));border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;border-bottom-color:var(--indextable-hover-bg,#fff);top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1;border-bottom-color:var(--indextable-hover-bg,#a2a9b1)}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;color:var(--text,#000);margin-top:.25em}
.dfn-panel ul a[href]{color:#333;color:var(--text,#333)}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>
    
    
<title>Remote Playback API</title>
    
    
    
<style>

    /* Note formatting taken from Presentation API spec for consistency in the
       Second Screen WG */
    .note { border-left-style: solid; border-left-width: 0.25em; background: none repeat scroll 0 0 #E9FBE9; border-color: #52E052; }
    .note em, .warning em, .note i, .warning i { font-style: normal; }
    p.note, div.note { padding: 0.5em 2em; }
    span.note { padding: 0 2em; }
    .note p:first-child { margin-top: 0; }
    .note p:last-child { margin-bottom: 0; }
    p.note:before { content: 'NOTE: '; }
    .non-normative { border-left-style: solid; border-left-width: 0.25em; background: none repeat scroll 0 0 #E9FBE9; border-color: #52E052; }
    p.non-normative:before { content: 'Non-normative: '; font-weight: bolder;}
    p.non-normative, div.non-normative { padding: 0.5em 2em; }
    .algorithm li {
        margin-bottom: 0.5em;
    }
    .interface dd, .parameters dt {
        margin-bottom: 0.5em;
    }
    code { color: orangered; }
    table { border-collapse: collapse; border-style: hidden hidden none hidden; }
    table thead, table tbody { border-bottom: solid; }
    table td, table th { border-left: solid; border-right: solid; border-bottom: solid thin; vertical-align: top; padding: 0.2em; }
    dfn { font-weight: bolder; font-style: normal; }
    .copyright { font-size: small; }
    .issue[id^='issue-'] > *:not([role='heading']) { display: none; }
    
</style>
  
<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
.self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
aside.example .marker>a.self-link{color:inherit}
.header-wrapper{display:flex;align-items:baseline}
:is(h2,h3,h4,h5,h6):not(#toc>h2,#abstract>h2,#sotd>h2,.head>h2){position:relative;left:-.5em}
:is(h2,h3,h4,h5,h6):not(#toch2)+a.self-link{color:inherit;order:-1;position:relative;left:-1.1em;font-size:1rem;opacity:.5}
:is(h2,h3,h4,h5,h6)+a.self-link::before{content:"§";text-decoration:none;color:var(--heading-text)}
:is(h2,h3)+a.self-link{top:-.2em}
:is(h4,h5,h6)+a.self-link::before{color:#000}
@media (max-width:767px){
dd{margin-left:0}
}
@media print{
.removeOnSave{display:none}
}
</style>
<meta name="color-scheme" content="light">
<meta name="revision" content="151a3f48986c0a390903c4a16c09e5c85c2cb6d0">
<meta name="description" content="This specification defines an API extending the HTMLMediaElement
        that enables controlling remote playback of media from a web page.">
<style>
.hljs{--base:#fafafa;--mono-1:#383a42;--mono-2:#686b77;--mono-3:#717277;--hue-1:#0b76c5;--hue-2:#336ae3;--hue-3:#a626a4;--hue-4:#42803c;--hue-5:#ca4706;--hue-5-2:#c91243;--hue-6:#986801;--hue-6-2:#9a6a01}
@media (prefers-color-scheme:dark){
.hljs{--base:#282c34;--mono-1:#abb2bf;--mono-2:#818896;--mono-3:#5c6370;--hue-1:#56b6c2;--hue-2:#61aeee;--hue-3:#c678dd;--hue-4:#98c379;--hue-5:#e06c75;--hue-5-2:#be5046;--hue-6:#d19a66;--hue-6-2:#e6c07b}
}
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;color:var(--mono-1,#383a42);background:#fafafa;background:var(--base,#fafafa)}
.hljs-comment,.hljs-quote{color:#717277;color:var(--mono-3,#717277);font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4;color:var(--hue-3,#a626a4)}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;color:var(--hue-5,#ca4706);font-weight:700}
.hljs-literal{color:#0b76c5;color:var(--hue-1,#0b76c5)}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c;color:var(--hue-4,#42803c)}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01;color:var(--hue-6-2,#9a6a01)}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801;color:var(--hue-6,#986801)}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3;color:var(--hue-2,#336ae3)}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#222}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#222;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "specStatus": "ED",
  "edDraftURI": "https://w3c.github.io/remote-playback/",
  "shortName": "remote-playback",
  "group": "secondscreen",
  "editors": [
    {
      "w3cid": 68454,
      "name": "Mark Foltz",
      "company": "Google"
    }
  ],
  "formerEditors": [
    {
      "w3cid": 45389,
      "name": "Mounir Lamouri",
      "company": "Google"
    },
    {
      "w3cid": 68811,
      "name": "Anton Vayvod",
      "company": "Google"
    }
  ],
  "sotdAfterWGinfo": true,
  "license": "w3c-software-doc",
  "otherLinks": [
    {
      "key": "Test suite",
      "data": [
        {
          "value": "GitHub web-platform-tests/remote-playback",
          "href": "https://github.com/web-platform-tests/wpt/tree/master/remote-playback"
        },
        {
          "value": "w3c-test.org/remote-playback/",
          "href": "https://w3c-test.org/remote-playback/"
        }
      ]
    }
  ],
  "github": "https://github.com/w3c/remote-playback",
  "crEnd": "2017-11-30",
  "implementationReportURI": "https://www.w3.org/wiki/Second_Screen/Implementation_Status#Remote_Playback_API",
  "gitRevision": "151a3f48986c0a390903c4a16c09e5c85c2cb6d0",
  "publishISODate": "2024-04-30T00:00:00.000Z",
  "generatedSubtitle": "W3C Editor's Draft 30 April 2024"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED"></head>
  <body data-cite="WEBIDL HTML DOM URL SECURE-CONTEXTS" class="h-entry"><div class="head">
    <p class="logos"><a class="logo" href="https://www.w3.org/"><img crossorigin="" alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72">
  </a></p>
    <h1 id="title" class="title">Remote Playback API</h1> 
    <p id="w3c-state"><a href="https://www.w3.org/standards/types#ED">W3C Editor's Draft</a> <time class="dt-published" datetime="2024-04-30">30 April 2024</time></p>
    <details open="">
      <summary>More details about this document</summary>
      <dl>
        <dt>This version:</dt><dd>
                <a class="u-url" href="https://w3c.github.io/remote-playback/">https://w3c.github.io/remote-playback/</a>
              </dd>
        <dt>Latest published version:</dt><dd>
                <a href="https://www.w3.org/TR/remote-playback/">https://www.w3.org/TR/remote-playback/</a>
              </dd>
        <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/remote-playback/">https://w3c.github.io/remote-playback/</a></dd>
        <dt>History:</dt><dd>
                    <a href="https://www.w3.org/standards/history/remote-playback/">https://www.w3.org/standards/history/remote-playback/</a>
                  </dd><dd>
                    <a href="https://github.com/w3c/remote-playback/commits/">Commit history</a>
                  </dd>
        
        <dt>Implementation report:</dt><dd>
                <a href="https://www.w3.org/wiki/Second_Screen/Implementation_Status#Remote_Playback_API">https://www.w3.org/wiki/Second_Screen/Implementation_Status#Remote_Playback_API</a>
              </dd>
        
        
        
        <dt>Editor:</dt><dd class="editor p-author h-card vcard" data-editor-id="68454">
    <span class="p-name fn">Mark Foltz</span> (<span class="p-org org h-org">Google</span>)
  </dd>
        <dt>
                Former editors:
              </dt><dd class="editor p-author h-card vcard" data-editor-id="45389">
    <span class="p-name fn">Mounir Lamouri</span> (<span class="p-org org h-org">Google</span>)
  </dd><dd class="editor p-author h-card vcard" data-editor-id="68811">
    <span class="p-name fn">Anton Vayvod</span> (<span class="p-org org h-org">Google</span>)
  </dd>
        
        <dt>Feedback:</dt><dd>
        <a href="https://github.com/w3c/remote-playback/">GitHub w3c/remote-playback</a>
        (<a href="https://github.com/w3c/remote-playback/pulls/">pull requests</a>,
        <a href="https://github.com/w3c/remote-playback/issues/new/choose">new issue</a>,
        <a href="https://github.com/w3c/remote-playback/issues/">open issues</a>)
      </dd>
        
        <dt>Test suite</dt><dd>
    <a href="https://github.com/web-platform-tests/wpt/tree/master/remote-playback">GitHub web-platform-tests/remote-playback</a>
  </dd><dd>
    <a href="https://w3c-test.org/remote-playback/">w3c-test.org/remote-playback/</a>
  </dd>
      </dl>
    </details>
    
    
    <p class="copyright">
    <a href="https://www.w3.org/policies/#copyright">Copyright</a>
    ©
    2024
    
    <a href="https://www.w3.org/">World Wide Web Consortium</a>.
    <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup>
    <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>,
    <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and
    <a rel="license" href="https://www.w3.org/copyright/software-license-2023/" title="W3C Software and Document Notice and License">permissive document license</a> rules apply.
  </p>
    <hr title="Separator for header">
  </div>
    <section id="abstract" class="introductory"><h2>Abstract</h2>
      <p>
        This specification defines an API extending the <a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
        that enables controlling remote playback of media from a web page.
      </p>
    </section>
    <section id="sotd" class="introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this
      document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr>
      publications and the latest revision of this technical report can be found
      in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
      https://www.w3.org/TR/.</em></p><p>
    This document was published by the <a href="https://www.w3.org/groups/wg/secondscreen">Second Screen Working Group</a> as
    an Editor's Draft. 
  </p>
      <p>
        This document builds on the group's experience on presenting web
        content on external presentation-type displays, and re-uses patterns
        and design considerations from the Presentation API specification
        whenever appropriate [<cite><a class="bibref" data-link-type="biblio" href="#bib-presentation-api" title="Presentation API">PRESENTATION-API</a></cite>].
      </p>
      <p>
        Although this document is still a <strong>work in progress</strong> and
        is subject to change, the Working Group believes that the API surface is
        stable. Most of the remaining issues listed on the <a href="https://github.com/w3c/remote-playback/issues/">issue tracker</a> are
        considered minor at this stage except for
        Issue <a href="https://github.com/w3c/remote-playback/issues/41">#41</a>.
      </p>
      <p>
        Issue <a href="https://github.com/w3c/remote-playback/issues/41">#41</a>
        discusses the set of media playback features that remote playback
        devices are expected to support. The group will seek further developer
        feedback and implementation experience to identify any interoperability
        issues around these features when used during remote playback, and will
        further clarify the specification based on feedback received.
      </p>
      <p>
        For other issues or concerns, it is possible to <a href="https://github.com/w3c/remote-playback/issues/new">file a bug</a> or
        send an email to the <a href="https://lists.w3.org/Archives/Public/public-secondscreen/">mailing
        list</a>. For small editorial changes like typos, sending a pull request
        is appreciated.
      </p>
      <p>
        The Working Group invites everyone to review this document, and will
        work with relevant groups at <abbr title="World Wide Web Consortium">W3C</abbr> to conduct horizontal reviews on
        accessibility, internationalization, privacy, security and technical
        architecture principles.
      </p>
      <p>
        No feature has been identified as being <strong>at risk</strong>.
      </p>
      <p>
        The Second Screen Working Group will develop a test suite for the
        Remote Playback API during the Candidate Recommendation period and
        prepare an implementation report. For this specification to advance to
        Proposed Recommendation, two independent, interoperable implementations
        of each feature must be demonstrated, as detailed in the <a href="#candidate-recommendation-exit-criteria">Candidate Recommendation exit
        criteria</a> section.
      </p>
    <p>Publication as an Editor's Draft does not
  imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p><p>
    This is a draft document and may be updated, replaced or obsoleted by other
    documents at any time. It is inappropriate to cite this document as other
    than work in progress.
    
  </p><p>
    
        This document was produced by a group
        operating under the
        <a href="https://www.w3.org/Consortium/Patent-Policy/"><abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>.
      
    
                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
                <a rel="disclosure" href="https://www.w3.org/groups/wg/secondscreen/ipr">public list of any patent disclosures</a>
          made in connection with the deliverables of
          the group; that page also includes
          instructions for disclosing a patent. An individual who has actual
          knowledge of a patent which the individual believes contains
          <a href="https://www.w3.org/Consortium/Patent-Policy/#def-essential">Essential Claim(s)</a>
          must disclose the information in accordance with
          <a href="https://www.w3.org/Consortium/Patent-Policy/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
        
  </p><p>
                      This document is governed by the
                      <a id="w3c_process_revision" href="https://www.w3.org/2023/Process-20231103/">03 November 2023 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                    </p></section><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#abstract">Abstract</a></li><li class="tocline"><a class="tocxref" href="#sotd">Status of This Document</a></li><li class="tocline"><a class="tocxref" href="#conformance"><bdi class="secno">1. </bdi>Conformance</a></li><li class="tocline"><a class="tocxref" href="#introduction"><bdi class="secno">2. </bdi>
        Introduction
      </a></li><li class="tocline"><a class="tocxref" href="#use-cases-and-requirements"><bdi class="secno">3. </bdi>
        Use cases and requirements
      </a></li><li class="tocline"><a class="tocxref" href="#examples"><bdi class="secno">4. </bdi>
        Examples
      </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#monitor-availability-of-remote-playback-devices-example"><bdi class="secno">4.1 </bdi>
          Monitor availability of remote playback devices example
        </a></li><li class="tocline"><a class="tocxref" href="#starting-remote-playback-of-a-video-example"><bdi class="secno">4.2 </bdi>
          Starting remote playback of a video example
        </a></li><li class="tocline"><a class="tocxref" href="#monitoring-remote-playback-state-changes"><bdi class="secno">4.3 </bdi>
          Monitoring remote playback state changes
        </a></li></ol></li><li class="tocline"><a class="tocxref" href="#api"><bdi class="secno">5. </bdi>
        API
      </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#common-idioms"><bdi class="secno">5.1 </bdi>
          Common idioms
        </a></li><li class="tocline"><a class="tocxref" href="#remoteplayback-interface"><bdi class="secno">5.2 </bdi>
          <span data-export="" data-dfn-type="interface" data-idl="interface" data-title="RemotePlayback" data-dfn-for=""><code>RemotePlayback</code></span> interface
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#observing-remote-playback-device-availability"><bdi class="secno">5.2.1 </bdi>
            Observing remote playback device availability
          </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#the-set-of-availability-callbacks"><bdi class="secno">5.2.1.1 </bdi>
              The set of availability callbacks
            </a></li><li class="tocline"><a class="tocxref" href="#the-list-of-available-remote-playback-devices"><bdi class="secno">5.2.1.2 </bdi>
              The list of available remote playback devices
            </a></li><li class="tocline"><a class="tocxref" href="#getting-the-remote-playback-devices-availability-information"><bdi class="secno">5.2.1.3 </bdi>
              Getting the <span class="formerLink" data-link-type="dfn">remote playback devices</span> availability
              information
            </a></li><li class="tocline"><a class="tocxref" href="#monitoring-the-list-of-available-remote-playback-devices"><bdi class="secno">5.2.1.4 </bdi>
              Monitoring the list of available remote playback devices
            </a></li><li class="tocline"><a class="tocxref" href="#stop-observing-remote-playback-devices-availability"><bdi class="secno">5.2.1.5 </bdi>
              Stop observing remote playback devices availability
            </a></li></ol></li><li class="tocline"><a class="tocxref" href="#prompt-user-for-changing-remote-playback-state"><bdi class="secno">5.2.2 </bdi>
            Prompt user for changing remote playback state
          </a></li><li class="tocline"><a class="tocxref" href="#the-state-attribute"><bdi class="secno">5.2.3 </bdi>
            The <span data-dfn-for="RemotePlayback" data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="state" data-type="RemotePlaybackState" data-lt="state" data-local-lt="RemotePlayback.state"><code>state</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#establishing-a-connection-with-a-remote-playback-device"><bdi class="secno">5.2.4 </bdi>
            Establishing a connection with a remote playback device
          </a></li><li class="tocline"><a class="tocxref" href="#browser-initiated-remote-playback"><bdi class="secno">5.2.5 </bdi>
            Browser initiated remote playback
          </a></li><li class="tocline"><a class="tocxref" href="#media-commands-and-media-playback-state"><bdi class="secno">5.2.6 </bdi>
            Media commands and media playback state
          </a></li><li class="tocline"><a class="tocxref" href="#disconnecting-from-a-remote-playback-device"><bdi class="secno">5.2.7 </bdi>
            Disconnecting from a remote playback device
          </a></li><li class="tocline"><a class="tocxref" href="#event-handlers"><bdi class="secno">5.2.8 </bdi>
            Event Handlers
          </a></li></ol></li><li class="tocline"><a class="tocxref" href="#extensions-to-htmlmediaelement"><bdi class="secno">5.3 </bdi>
          Extensions to <span data-xref-type="_IDL_" data-link-type="idl" data-lt="HTMLMediaElement" data-cite="html" data-cite-path="/media.html" data-cite-frag="htmlmediaelement" data-type="interface" class="formerLink"><code>HTMLMediaElement</code></span>
        </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#the-disableremoteplayback-attribute"><bdi class="secno">5.3.1 </bdi>
            The <span data-export="" data-dfn-type="attribute" data-idl="attribute" data-title="disableRemotePlayback" data-dfn-for="HTMLMediaElement" data-type="boolean" data-lt="disableRemotePlayback" data-local-lt="HTMLMediaElement.disableRemotePlayback"><code>disableRemotePlayback</code></span> attribute
          </a></li><li class="tocline"><a class="tocxref" href="#disabling-remote-playback"><bdi class="secno">5.3.2 </bdi>
            Disabling remote playback
          </a></li></ol></li></ol></li><li class="tocline"><a class="tocxref" href="#security-and-privacy-considerations"><bdi class="secno">6. </bdi>
        Security and privacy considerations
      </a><ol class="toc"><li class="tocline"><a class="tocxref" href="#personally-identifiable-information"><bdi class="secno">6.1 </bdi>
          Personally identifiable information
        </a></li><li class="tocline"><a class="tocxref" href="#user-interface-guidelines"><bdi class="secno">6.2 </bdi>
          User interface guidelines
        </a></li><li class="tocline"><a class="tocxref" href="#device-access"><bdi class="secno">6.3 </bdi>
          Device Access
        </a></li><li class="tocline"><a class="tocxref" href="#messaging-between-the-local-and-remote-playback-devices"><bdi class="secno">6.4 </bdi>
          Messaging between the local and remote playback devices
        </a></li><li class="tocline"><a class="tocxref" href="#secure-contexts"><bdi class="secno">6.5 </bdi>
          Secure Contexts
        </a></li></ol></li><li class="tocline"><a class="tocxref" href="#candidate-recommendation-exit-criteria"><bdi class="secno">A. </bdi>
        Candidate Recommendation exit criteria
      </a></li><li class="tocline"><a class="tocxref" href="#references"><bdi class="secno">B. </bdi>References</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#normative-references"><bdi class="secno">B.1 </bdi>Normative references</a></li><li class="tocline"><a class="tocxref" href="#informative-references"><bdi class="secno">B.2 </bdi>Informative references</a></li></ol></li></ol></nav>
    <section id="conformance"><div class="header-wrapper"><h2 id="x1-conformance"><bdi class="secno">1. </bdi>Conformance</h2><a class="self-link" href="#conformance" aria-label="Permalink for Section 1."></a></div><p>As well as sections marked as non-normative, all authoring guidelines, diagrams, examples, and notes in this specification are non-normative. Everything else in this specification is normative.</p><p>
        The key words <em class="rfc2119">MAY</em>, <em class="rfc2119">MUST</em>, <em class="rfc2119">MUST NOT</em>, <em class="rfc2119">RECOMMENDED</em>, and <em class="rfc2119">SHOULD</em> in this document
        are to be interpreted as described in
        <a href="https://datatracker.ietf.org/doc/html/bcp14">BCP 14</a>
        [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc2119" title="Key words for use in RFCs to Indicate Requirement Levels">RFC2119</a></cite>] [<cite><a class="bibref" data-link-type="biblio" href="#bib-rfc8174" title="Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words">RFC8174</a></cite>]
        when, and only when, they appear in all capitals, as shown here.
      </p>
      <p>
        This specification defines conformance criteria that apply to a single
        product: the user agent that implements the interfaces that
        it contains.
      </p>
      <p>
        Implementations that use ECMAScript to expose the APIs defined in this
        specification <em class="rfc2119">MUST</em> implement them in a manner consistent with the
        ECMAScript Bindings defined in the Web IDL specification [<cite><a class="bibref" data-link-type="biblio" href="#bib-webidl" title="Web IDL Standard">WEBIDL</a></cite>].
      </p>
    </section>
    <section class="informative" id="introduction"><div class="header-wrapper"><h2 id="x2-introduction"><bdi class="secno">2. </bdi>
        Introduction
      </h2><a class="self-link" href="#introduction" aria-label="Permalink for Section 2."></a></div><p><em>This section is non-normative.</em></p>
      
      <p>
        This specification aims to make <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-1">remote playback devices</a> such as
        connected TVs, projectors or audio-only speakers, available to the Web
        and takes into account playback devices that are attached using wired
        (HDMI, DVI, or similar) and wireless technologies (Miracast,
        Chromecast, DLNA, AirPlay, or similar).
      </p>
      <p>
        Devices with limited screen size or quiet speakers lack the ability to
        playback media content to a larger audience, for example, a group of
        colleagues in a conference room, or friends and family at home. Playing
        media content on an external larger and/or louder <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-2">remote playback
        device</a> helps to improve the perceived quality and impact of the
        played media.
      </p>
      <p>
        At its core, this specification enables a page that acts as the
        <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a> to initiate and control remote playback of a
        particular media element on a selected <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-3">remote playback device</a>.
        How the remoting is initiated and controlled is left to the UA in order
        to allow the use of <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-4">remote playback devices</a> that can be attached
        in a wide variety of ways. For example, when a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-5">remote playback
        device</a> is attached using HDMI or Miracast, the same UA that acts as
        the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a> renders the remote media. Instead of
        playing the media on the same device, however, it can use whatever
        means the operating system provides for using the external <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-6">remote
        playback device</a>. In such a case, both the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a>
        and the media player run on the same UA and the operating system is
        used to route the player output to the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-7">remote playback device</a>.
        This is commonly referred to as the <dfn id="dfn-media-mirroring" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">media
        mirroring</dfn> case. This specification imposes no requirements on
        the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-8">remote playback devices</a> connected in such a manner.
      </p>
      <p>
        If the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-9">remote playback device</a> is able to play the media and
        communicate with the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a> but is unable to fetch the
        media, the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a> needs to fetch the media data and
        pass it on to the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-10">remote playback device</a> for rendering. This is
        commonly referred to as <dfn id="dfn-media-remoting" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">media remoting</dfn> case.
      </p>
      <p>
        If the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-11">remote playback device</a> is able to fetch and play the media
        and communicate with the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a>, the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing
        context</a> does not need to fetch or render the remoted media. In this
        case, the UA acts as a proxy that requests the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-12">remote playback
        device</a> to play the media itself by passing the necessary data like
        the media source. This is commonly referred to as the <dfn id="dfn-media-flinging" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">media
        flinging</dfn> case. This way of attaching to displays could be
        enhanced in the future by defining a standard protocol for delivering
        these types of messages that remote playback devices could choose to
        implement.
      </p>
      <p>
        The API defined here is intended to be used with UAs that attach to
        <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-13">remote playback device</a> devices through any of the above means.
      </p>
    </section>
    <section class="informative" id="use-cases-and-requirements"><div class="header-wrapper"><h2 id="x3-use-cases-and-requirements"><bdi class="secno">3. </bdi>
        Use cases and requirements
      </h2><a class="self-link" href="#use-cases-and-requirements" aria-label="Permalink for Section 3."></a></div><p><em>This section is non-normative.</em></p>
      
      <p>
        The use cases and requirements of this specification are captured in a
        separate document available <a href="https://github.com/w3c/remote-playback/blob/gh-pages/use-cases.md">here</a>.
      </p>
    </section>
    <section id="examples"><div class="header-wrapper"><h2 id="x4-examples"><bdi class="secno">4. </bdi>
        Examples
      </h2><a class="self-link" href="#examples" aria-label="Permalink for Section 4."></a></div>
      
      <p>
        This section shows code examples that highlight the usage of the main
        features of the Remote Playback API. In these examples,
        <code>player.html</code> implements the player page controlling the
        remote playback and <code>media.ext</code> is the media file to be
        played remotely. Both the page and the media are served from the domain
        <code>https://example.org</code>. Please refer to the comments in the
        code examples for further details.
      </p>
      <section id="monitor-availability-of-remote-playback-devices-example"><div class="header-wrapper"><h3 id="x4-1-monitor-availability-of-remote-playback-devices-example"><bdi class="secno">4.1 </bdi>
          Monitor availability of remote playback devices example
        </h3><a class="self-link" href="#monitor-availability-of-remote-playback-devices-example" aria-label="Permalink for Section 4.1"></a></div>
        
        <div class="example" id="example-1">
        <div class="marker">
    <a class="self-link" href="#example-1">Example<bdi> 1</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-comment">&lt;!-- player.html --&gt;</span>
<span class="hljs-comment">&lt;!-- The video element with custom controls that supports remote playback. --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">video</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"videoElement"</span> <span class="hljs-attr">src</span>=<span class="hljs-string">"https://example.org/media.ext"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"deviceBtn"</span> <span class="hljs-attr">style</span>=<span class="hljs-string">"display: none;"</span>&gt;</span>Pick device<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// The "Pick device" button is visible if at least one remote playback device is available.</span>
  <span class="hljs-keyword">const</span> deviceBtn = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"deviceBtn"</span>);
  <span class="hljs-keyword">const</span> videoElem = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"videoElement"</span>);

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">availabilityCallback</span>(<span class="hljs-params">available</span>) </span>{
    <span class="hljs-comment">// Show or hide the device picker button depending on device availability.</span>
    deviceBtn.style.display = available ? <span class="hljs-string">"inline"</span> : <span class="hljs-string">"none"</span>;
  }

  videoElem.remote.watchAvailability(availabilityCallback).catch(<span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// Availability monitoring is not supported by the platform, so discovery of</span>
    <span class="hljs-comment">// remote playback devices will happen only after remote.prompt() is called.</span>
    <span class="hljs-comment">// Pretend the devices are available for simplicity; or, one could implement</span>
    <span class="hljs-comment">// a third state for the button.</span>
    deviceBtn.style.display = <span class="hljs-string">"inline"</span>;
  });
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></code></pre>
      </div>
      </section>
      <section id="starting-remote-playback-of-a-video-example"><div class="header-wrapper"><h3 id="x4-2-starting-remote-playback-of-a-video-example"><bdi class="secno">4.2 </bdi>
          Starting remote playback of a video example
        </h3><a class="self-link" href="#starting-remote-playback-of-a-video-example" aria-label="Permalink for Section 4.2"></a></div>
        
        <div class="example" id="example-2">
        <div class="marker">
    <a class="self-link" href="#example-2">Example<bdi> 2</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-comment">&lt;!-- player.html --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  deviceBtn.onclick = <span class="hljs-function">() =&gt;</span> {
    <span class="hljs-comment">// Request the user to select a remote playback device.</span>
    videoElem.remote.prompt()
      <span class="hljs-comment">// Update the UI and monitor the connected state.</span>
      .then(updateRemotePlaybackState);
      <span class="hljs-comment">// Otherwise, the user cancelled the selection UI or no screens were found.</span>
  };
&lt;script&gt;</span></code></pre>
      </div>
      </section>
      <section id="monitoring-remote-playback-state-changes"><div class="header-wrapper"><h3 id="x4-3-monitoring-remote-playback-state-changes"><bdi class="secno">4.3 </bdi>
          Monitoring remote playback state changes
        </h3><a class="self-link" href="#monitoring-remote-playback-state-changes" aria-label="Permalink for Section 4.3"></a></div>
        
        <div class="example" id="example-3">
        <div class="marker">
    <a class="self-link" href="#example-3">Example<bdi> 3</bdi></a>
  </div> <pre aria-busy="false"><code class="hljs xml"><span class="hljs-comment">&lt;!-- player.html --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">// The remote playback may be initiated by the user agent,</span>
  <span class="hljs-comment">// so check the initial state to sync the UI with it.</span>
  <span class="hljs-keyword">if</span> (videoElem.remote.state == <span class="hljs-string">"disconnected"</span>)
    switchToLocalUI();
  <span class="hljs-keyword">else</span>
    switchToRemoteUI();

  videoElem.remote.onconnecting = switchToRemoteUI;
  videoElem.remote.onconnect = switchToRemoteUI;
  videoElem.remote.ondisconnect = switchToLocalUI;

  <span class="hljs-comment">// Handles both 'connecting' and 'connected' state. Calling more than once</span>
  <span class="hljs-comment">// is a no-op.</span>
  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchToRemoteUI</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// Indicate that the state is 'connecting' or 'connected' to the user.</span>
    <span class="hljs-comment">// For example, hide the video element as only controls are needed.</span>
    videoElem.style.display = <span class="hljs-string">"none"</span>;

    <span class="hljs-comment">// Stop monitoring the availability of remote playback devices.</span>
    videoElem.remote.cancelWatchAvailability();
  };

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">switchToLocalUI</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// Show the video element.</span>
    videoElem.style.display = <span class="hljs-string">"inline"</span>;
    <span class="hljs-comment">// Start watching the device availability again.</span>
    videoElem.remote.watchAvailability(availabilityCallback);
  };
&lt;script&gt;</span></code></pre>
      </div>
      </section>
    </section>
    <section id="api"><div class="header-wrapper"><h2 id="x5-api"><bdi class="secno">5. </bdi>
        API
      </h2><a class="self-link" href="#api" aria-label="Permalink for Section 5."></a></div>
      
      <section id="common-idioms"><div class="header-wrapper"><h3 id="x5-1-common-idioms"><bdi class="secno">5.1 </bdi>
          Common idioms
        </h3><a class="self-link" href="#common-idioms" aria-label="Permalink for Section 5.1"></a></div>
        
        <p>
          A <dfn id="dfn-local-playback-device" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">local playback device</dfn> is the device the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing
          context</a> is running on along with the default video/audio outputs
          the device has.
        </p>
        <div class="note" role="note" id="issue-container-generatedID"><div role="heading" class="note-title marker" id="h-note" aria-level="4"><span>Note</span></div><div class="">
          A <a href="#dfn-local-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-device-1">local playback device</a> might have extra outputs, like an
          external display or speakers/headphones. As long as the switch of
          what output to use happens outside of the user agent on the
          system level, the playback is considered to happen on a <a href="#dfn-local-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-device-2">local
          playback device</a> for the purpose of this spec.
        </div></div>
        <p>
          A <dfn data-lt="remote playback devices|remote playback device" id="dfn-remote-playback-devices" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">remote playback device</dfn>
          is any other device but the <a href="#dfn-local-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-device-3">local playback device</a> that the
          <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a> can use to play media on.
        </p>
        <p>
          A <dfn id="dfn-media-element-state" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">media element state</dfn> is the set of all single
          <dfn data-plurals="media elements" id="dfn-media-element" class="externalDFN" data-no-export="" data-dfn-type="dfn"><a href="https://html.spec.whatwg.org/multipage/#media-element">media element</a></dfn>
          properties observable by the page and/or the user via the
          user agent implementation. The new properties introduced by
          this spec are not considered part of the <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-1">media element state</a>
          for convenience.
        </p>
        <div class="example">
          For example, the <code>paused</code> attribute or the pause/resume
          button reflecting that state on the default controls of the media
          element would be a part of <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-2">media element state</a>.
        </div>
        <p>
          A <dfn id="dfn-local-playback-state" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">local playback state</dfn> is the user agent implementation of
          <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-3">media element state</a> for the particular <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>
          for playback on the <a href="#dfn-local-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-device-4">local playback device</a>.
        </p>
        <p>
          A <dfn id="dfn-remote-playback-state" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">remote playback state</dfn> is the user agent implementation
          of <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-4">media element state</a> for the particular <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>
          for playback on the certain <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-14">remote playback device</a>.
        </p>
        <div class="note" role="note" id="issue-container-generatedID-0"><div role="heading" class="note-title marker" id="h-note-0" aria-level="4"><span>Note</span></div><p class="">
          For a good user experience it is important that the <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-5">media element
          state</a> doesn't change unexpectedly when the
          <a data-link-type="idl" href="#dom-remoteplayback-state" class="internalDFN" id="ref-for-dom-remoteplayback-state-1"><code>state</code></a> changes. It is also important that <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-1">remote
          playback state</a> is in sync with the <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-6">media element state</a> so
          when the media is paused on the
          <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-15">remote playback device</a> it looks paused to both the user and
          the page.
        </p></div>
        <p>
          The <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#task-source">task source</a> for the tasks mentioned in this specification
          is the <a href="https://html.spec.whatwg.org/multipage/#media-element-event-task-source">
          media element event task source</a>.
        </p>
      </section>
      <section id="remoteplayback-interface"><div class="header-wrapper"><h3 id="x5-2-remoteplayback-interface"><bdi class="secno">5.2 </bdi>
          <dfn data-export="" data-dfn-type="interface" id="dom-remoteplayback" data-idl="interface" data-title="RemotePlayback" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>RemotePlayback</code></dfn> interface
        </h3><a class="self-link" href="#remoteplayback-interface" aria-label="Permalink for Section 5.2"></a></div>
        
        <pre class="idl def" id="webidl-1015675303"><span class="idlHeader"><a class="self-link" href="#webidl-1015675303">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-remoteplayback" data-title="RemotePlayback">[<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#Exposed">Exposed</a>=Window</span>]
interface <a class="internalDFN idlID" data-link-type="interface" href="#dom-remoteplayback" id="ref-for-dom-remoteplayback-1"><code>RemotePlayback</code></a> : <span class="idlSuperclass"><a data-link-type="idl" data-type="interface" href="https://dom.spec.whatwg.org/#eventtarget">EventTarget</a></span> {<span data-idl="" class="idlMethod" id="idl-def-remoteplayback-watchavailability-callback" data-title="watchAvailability" data-dfn-for="RemotePlayback"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-long">long</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-remoteplayback-watchavailability" id="ref-for-dom-remoteplayback-watchavailability-1"><code>watchAvailability</code></a>(<span class="idlType"><a data-link-type="idl" href="#dom-remoteplaybackavailabilitycallback" class="internalDFN" id="ref-for-dom-remoteplaybackavailabilitycallback-1"><code>RemotePlaybackAvailabilityCallback</code></a></span> <span class="idlParamName">callback</span>);</span><span data-idl="" class="idlMethod" id="idl-def-remoteplayback-cancelwatchavailability-id" data-title="cancelWatchAvailability" data-dfn-for="RemotePlayback"><span class="idlType">
  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-remoteplayback-cancelwatchavailability" id="ref-for-dom-remoteplayback-cancelwatchavailability-1"><code>cancelWatchAvailability</code></a>(optional<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-long">long</a></span> <span class="idlParamName">id</span>);</span><span data-idl="" class="idlAttribute" id="idl-def-remoteplayback-state" data-title="state" data-dfn-for="RemotePlayback">

  readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-remoteplaybackstate" class="internalDFN" id="ref-for-dom-remoteplaybackstate-1"><code>RemotePlaybackState</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-remoteplayback-state" id="ref-for-dom-remoteplayback-state-2"><code>state</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-remoteplayback-onconnecting" data-title="onconnecting" data-dfn-for="RemotePlayback">

  attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-remoteplayback-onconnecting" id="ref-for-dom-remoteplayback-onconnecting-1"><code>onconnecting</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-remoteplayback-onconnect" data-title="onconnect" data-dfn-for="RemotePlayback">
  attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-remoteplayback-onconnect" id="ref-for-dom-remoteplayback-onconnect-1"><code>onconnect</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-remoteplayback-ondisconnect" data-title="ondisconnect" data-dfn-for="RemotePlayback">
  attribute<span class="idlType"> <a data-link-type="idl" data-type="typedef" href="https://html.spec.whatwg.org/multipage/webappapis.html#eventhandler">EventHandler</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-remoteplayback-ondisconnect" id="ref-for-dom-remoteplayback-ondisconnect-1"><code>ondisconnect</code></a>;</span><span data-idl="" class="idlMethod" id="idl-def-remoteplayback-prompt" data-title="prompt" data-dfn-for="RemotePlayback"><span class="idlType">

  <a data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise">Promise</a>&lt;<a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a>&gt;</span> <a class="internalDFN idlName" data-link-type="method" href="#dom-remoteplayback-prompt" id="ref-for-dom-remoteplayback-prompt-1"><code>prompt</code></a>();</span>
};</span><span data-idl="" class="idlEnum" id="idl-def-remoteplaybackstate" data-title="RemotePlaybackState">

enum <a class="internalDFN idlID" data-link-type="enum" href="#dom-remoteplaybackstate" id="ref-for-dom-remoteplaybackstate-2"><code>RemotePlaybackState</code></a> {
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-remoteplaybackstate-connecting" id="ref-for-dom-remoteplaybackstate-connecting-1"><code>connecting</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-remoteplaybackstate-connected" id="ref-for-dom-remoteplaybackstate-connected-1"><code>connected</code></a>"</span>,
  <span class="idlEnumItem">"<a class="internalDFN" data-link-type="enum-value" href="#dom-remoteplaybackstate-disconnected" id="ref-for-dom-remoteplaybackstate-disconnected-1"><code>disconnected</code></a>"</span>
};</span><span data-idl="" class="idlCallback" id="idl-def-remoteplaybackavailabilitycallback" data-title="RemotePlaybackAvailabilityCallback">

callback <a class="internalDFN idlID" data-link-type="callback" href="#dom-remoteplaybackavailabilitycallback" id="ref-for-dom-remoteplaybackavailabilitycallback-2"><code>RemotePlaybackAvailabilityCallback</code></a> =<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-undefined">undefined</a></span>(<span class="idlType"><a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <span class="idlParamName">available</span>);</span></code></pre>
        <p>
          A <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-2"><code>RemotePlayback</code></a> object allows the page to detect availability
          of, connect to and control playback on <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-16">remote playback devices</a>.
        </p>
        <p>
          The <dfn data-export="" data-dfn-type="enum" id="dom-remoteplaybackstate" data-idl="enum" data-title="RemotePlaybackState" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>RemotePlaybackState</code></dfn> enum represents possible connection
          states to a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-17">remote playback device</a>.
        </p>
        <p>
          The <dfn data-export="" data-dfn-type="callback" id="dom-remoteplaybackavailabilitycallback" data-idl="callback" data-title="RemotePlaybackAvailabilityCallback" data-dfn-for="" tabindex="0" aria-haspopup="dialog"><code>RemotePlaybackAvailabilityCallback</code></dfn> returns the current 
          <a href="#dfn-remote-playback-device-availability" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-device-availability-1">remote playback device availability</a>.
        </p>
        <section data-link-for="RemotePlayback" id="observing-remote-playback-device-availability"><div class="header-wrapper"><h4 id="x5-2-1-observing-remote-playback-device-availability"><bdi class="secno">5.2.1 </bdi>
            Observing remote playback device availability
          </h4><a class="self-link" href="#observing-remote-playback-device-availability" aria-label="Permalink for Section 5.2.1"></a></div>
          
          <p>
            A <a data-link-type="idl" data-lt="RemotePlaybackAvailabilityCallback" href="#dom-remoteplaybackavailabilitycallback" class="internalDFN" id="ref-for-dom-remoteplaybackavailabilitycallback-3"><code>RemotePlaybackAvailabilityCallback</code></a> is the way for the page to
            obtain the <dfn id="dfn-remote-playback-device-availability" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">remote playback device availability</dfn> for the
            corresponding <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>. If the user agent can <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-1">monitor
            the list of available remote playback devices</a> in the background
            (without a pending request to <a data-link-type="idl" data-lt="prompt()" href="#dom-remoteplayback-prompt" class="internalDFN" id="ref-for-dom-remoteplayback-prompt-2"><code>prompt</code></a><code>()</code>), the
            <a data-link-type="idl" data-lt="RemotePlaybackAvailabilityCallback" href="#dom-remoteplaybackavailabilitycallback" class="internalDFN" id="ref-for-dom-remoteplaybackavailabilitycallback-4"><code>RemotePlaybackAvailabilityCallback</code></a> behavior defined below <em class="rfc2119">MUST</em>
            be implemented by the user agent. Otherwise, the promise returned by
            <a data-link-type="idl" data-lt="watchAvailability()" href="#dom-remoteplayback-watchavailability" class="internalDFN" id="ref-for-dom-remoteplayback-watchavailability-2"><code>watchAvailability</code></a><code>()</code> <em class="rfc2119">MUST</em> be rejected with
            <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>.
          </p>
          <section id="the-set-of-availability-callbacks"><div class="header-wrapper"><h5 id="x5-2-1-1-the-set-of-availability-callbacks"><bdi class="secno">5.2.1.1 </bdi>
              The set of availability callbacks
            </h5><a class="self-link" href="#the-set-of-availability-callbacks" aria-label="Permalink for Section 5.2.1.1"></a></div>
            
            <p>
              The user agent <em class="rfc2119">MUST</em> keep track of the <dfn id="dfn-set-of-availability-callbacks" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">set of availability
              callbacks</dfn> registered with each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> through
              the <dfn data-dfn-for="RemotePlayback" data-export="" data-dfn-type="method" id="dom-remoteplayback-watchavailability" data-idl="operation" data-title="watchAvailability()" data-type="Promise" data-lt="watchAvailability()|watchAvailability(callback)" data-local-lt="RemotePlayback.watchAvailability|RemotePlayback.watchAvailability()|watchAvailability" tabindex="0" aria-haspopup="dialog"><code>watchAvailability()</code></dfn>
              method. The <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-1">set of availability callbacks</a> for each
              <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-3"><code>RemotePlayback</code></a> object is represented as a set of tuples
              <em>(<var data-type="long">callbackId</var>, <var data-type="RemotePlaybackAvailabilityCallback">callback</var>)</em>,
              initially empty, where:
            </p>
            <ol>
              <li>
                <var data-type="long">callbackId</var> is a positive integer unique among all ids
                returned by <a data-link-type="idl" data-lt="watchAvailability()" href="#dom-remoteplayback-watchavailability" class="internalDFN" id="ref-for-dom-remoteplayback-watchavailability-3"><code>watchAvailability</code></a><code>()</code> in a
                given <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a>;
              </li>
              <li>
                <var data-type="RemotePlaybackAvailabilityCallback">callback</var> is a <a data-link-type="idl" data-lt="RemotePlaybackAvailabilityCallback" href="#dom-remoteplaybackavailabilitycallback" class="internalDFN" id="ref-for-dom-remoteplaybackavailabilitycallback-5"><code>RemotePlaybackAvailabilityCallback</code></a> object.
              </li>
            </ol>
            <p>
              Since there's one and only one <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-4"><code>RemotePlayback</code></a> object per
              each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>, <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-2">set of availability callbacks</a>
              of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> is the same set as the <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-3">set of
              availability callbacks</a> of the <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-5"><code>RemotePlayback</code></a> object
              referred to by the element's <a href="#dom-htmlmediaelement-remote" class="internalDFN" data-link-type="idl" id="ref-for-dom-htmlmediaelement-remote-1"><code>remote</code></a> property.
            </p>
            <p>
              The combined set of all <a data-lt="set of availability callbacks" href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-4">sets of availability
              callbacks</a> of all <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-6"><code>RemotePlayback</code></a> objects known to the
              <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a> is referred to as <dfn id="dfn-global-set-of-availability-callbacks" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">global set of
              availability callbacks</dfn>.
            </p>
          </section>
          <section id="the-list-of-available-remote-playback-devices"><div class="header-wrapper"><h5 id="x5-2-1-2-the-list-of-available-remote-playback-devices"><bdi class="secno">5.2.1.2 </bdi>
              The list of available remote playback devices
            </h5><a class="self-link" href="#the-list-of-available-remote-playback-devices" aria-label="Permalink for Section 5.2.1.2"></a></div>
            
            <p>
              The user agent <em class="rfc2119">MUST</em> keep a <dfn id="dfn-list-of-available-remote-playback-devices" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">list of available remote
              playback devices</dfn>. This list contains <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-18">remote playback
              devices</a> and is populated based on an implementation specific
              discovery mechanism. It is set to the most recent result of the
              algorithm to <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-2">monitor the list of available remote playback
              devices</a> or an empty list if the algorithm hasn't been run
              yet.
            </p>
            <p>
              The user agent <em class="rfc2119">MAY</em> not support running the algorithm to
              <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-3">monitor the list of available remote playback devices</a>
              continuously, for example, because of platform or power
              consumption restrictions. In this case the promise returned by
              <a data-link-type="idl" data-lt="watchAvailability()" href="#dom-remoteplayback-watchavailability" class="internalDFN" id="ref-for-dom-remoteplayback-watchavailability-4"><code>watchAvailability</code></a><code>()</code> <em class="rfc2119">MUST</em> be rejected with
              <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>, the <a href="#dfn-global-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-global-set-of-availability-callbacks-1">global set of availability
              callbacks</a> will be empty and the algorithm to <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-4">monitor the
              list of available remote playback devices</a> will only run as
              part of the <a href="#dfn-initiate-remote-playback" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-initiate-remote-playback-1">initiate remote playback</a> algorithm.
            </p>
            <p>
              When the <a href="#dfn-global-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-global-set-of-availability-callbacks-2">global set of availability callbacks</a> is not
              empty, the user agent <em class="rfc2119">MUST</em> <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-5">monitor the list of
              available remote playback devices</a> continuously, so that pages
              can keep track of the last value received via the registered
              callbacks to offer remote playback only when there are available
              devices.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-1"><div role="heading" class="note-title marker" id="h-note-1" aria-level="6"><span>Note</span></div><p class="">
              The user agent is expected not to <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-6">monitor the list of available
              remote playback devices</a> when possible, to satisfy the <a href="https://github.com/w3c/remote-playback/blob/gh-pages/use-cases.md#power-saving-friendly">
              power saving non-functional requirement</a>. For example, the
              user agent might choose not to run the monitoring
              algorithm when the <a href="#dfn-global-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-global-set-of-availability-callbacks-3">global set of availability callbacks</a> is
              empty, when every page that has <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media elements</a> with non-empty
              <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-5">set of availability callbacks</a> is in the background.
            </p></div>
            <p>
              Some <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-19">remote playback devices</a> may only be able to play a
              subset of <a href="https://html.spec.whatwg.org/multipage/#media-resource">media resources</a>
              because of functional, security or hardware limitations. Examples
              are set-top boxes, smart TVs or networked speakers capable of
              rendering only certain formats of video and/or audio. We say that
              such a device is a <dfn id="dfn-compatible-remote-playback-device" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">compatible remote playback device</dfn>
              for a <a href="https://html.spec.whatwg.org/multipage/#media-resource">media resource</a>
              if the user agent can reasonably guarantee that the
              remote playback of the media specified by the resource will
              succeed on that device.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-2"><div role="heading" class="note-title marker" id="h-note-2" aria-level="6"><span>Note</span></div><p class="">
              The user agent can use the <a data-link-type="idl" data-type="attribute" href="https://html.spec.whatwg.org/multipage/media.html#dom-track-srclang"><code>srclang</code></a>
              attribute of the <code><code><a data-link-type="element" data-type="element" href="https://html.spec.whatwg.org/multipage/media.html#the-track-element">track</a></code></code> element as a hint of
              the language of the text track data to help identify a
              <a href="#dfn-compatible-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-compatible-remote-playback-device-1">compatible remote playback device</a>.
            </p></div>
            <p>
              The <a href="https://html.spec.whatwg.org/multipage/#media-resource">media resources</a>
              of a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>, that were considered by the user agent
              to find a <a href="#dfn-compatible-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-compatible-remote-playback-device-2">compatible remote playback device</a>, are called the
              <dfn id="dfn-availability-sources-set" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">availability sources set</dfn>.
            </p>
            <p>
              The <a href="https://html.spec.whatwg.org/multipage/#media-resource">media resource</a> of
              a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> that is used to <a href="#dfn-initiate-remote-playback" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-initiate-remote-playback-2">initiate remote
              playback</a> on the selected <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-20">remote playback device</a> is
              called the <dfn id="dfn-remote-playback-source" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">remote playback source</dfn>.  A remote playback
              source <em class="rfc2119">MUST</em> belong to the media element's <a href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-sources-set-1">availability sources
              set</a>.
            </p>
            <p>
              The mechanism to choose the <a href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-source-1">remote playback source</a> from
              the <a href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-sources-set-2">availability sources set</a> is implementation-specific,
              but the user agent <em class="rfc2119">SHOULD</em> consider every resource in
              the <a href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-sources-set-3">availability sources set</a> as a potential <a href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-source-2">remote
              playback source</a>.
            </p>
            <div class="note" role="note" id="issue-container-generatedID-3"><div role="heading" class="note-title marker" id="h-note-3" aria-level="6"><span>Note</span></div><div class="">
              The algorithm to select the <a href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-source-3">remote playback source</a> for a
              selected device depends on the user agent and supported <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-21">remote
              playback device</a> types. For example, in case of <a href="#dfn-media-mirroring" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-mirroring-1">media
              mirroring</a> the user agent can simply follow the
              <a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>'s <a href="https://html.spec.whatwg.org/multipage/#concept-media-load-algorithm">
              resource selection algorithm</a>.  However, if <a href="#dfn-media-remoting" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-remoting-1">media
              remoting</a> or <a href="#dfn-media-flinging" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-flinging-1">media flinging</a> is used, the best media
              source can depend on the selected <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-22">remote playback device</a>
              fetch and playback capabilities.
            </div></div>
            <p>
              If the user agent cannot determine a <a href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-source-4">remote playback source</a>
              appropriate for the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-23">remote playback device</a>, it is
              <em class="rfc2119">RECOMMENDED</em> that the user agent send metadata (for example,
              the <a href="https://html.spec.whatwg.org/multipage/#attr-source-type">extended MIME type</a>)
              about all resources in the <a href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-sources-set-4">availability sources set</a> to
              the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-24">remote playback device</a> so it can run its own
              <a href="https://html.spec.whatwg.org/multipage/#concept-media-load-algorithm">resource
              selection algorithm</a> and choose the <a href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-source-5">remote playback
              source</a>.
            </p>
            <p>
              Remote playback is <dfn id="dfn-unavailable" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">unavailable</dfn> for the
              <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> if the <a href="#dfn-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-list-of-available-remote-playback-devices-1">list of available remote playback
              devices</a> is empty or none of them is compatible with any source
              from <a href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-sources-set-5">availability sources set</a> for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media
              element</a>. Otherwise, remote playback is
              <dfn id="dfn-available" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">available</dfn>. A <code>boolean</code> set to <code>false</code> if the remote
              playback is <a href="#dfn-unavailable" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-unavailable-1">unavailable</a> for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> or
              <code>true</code> if it is <a href="#dfn-available" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-available-1">available</a> is called
              <dfn id="dfn-availability" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">availability</dfn> for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>.
            </p>
            <p>
              If the user agent stops
              <a data-lt="monitor the list of available remote playback devices" href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-7">
              monitoring the list of available remote playback devices</a>
              (for example by a user control or for power saving), it <em class="rfc2119">SHOULD</em>
              invoke all callbacks in the <a href="#dfn-global-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-global-set-of-availability-callbacks-4">global set of availability
              callbacks</a> with <code>false</code> so that pages can update
              their user experience appropriately.  It <em class="rfc2119">SHOULD</em> also set
              the <a href="#dfn-availability" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-1">availability</a> value for all <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media elements</a>
              to <code>false</code> so that availability information can
              be propagated correctly if the user agent later resumes
              <a data-lt="monitor the list of available remote playback devices" href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-8">
              monitoring the list of available remote playback devices</a>.
            </p>
          </section>
          <section id="getting-the-remote-playback-devices-availability-information"><div class="header-wrapper"><h5 id="x5-2-1-3-getting-the-remote-playback-devices-availability-information"><bdi class="secno">5.2.1.3 </bdi>
              Getting the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-25">remote playback devices</a> availability
              information
            </h5><a class="self-link" href="#getting-the-remote-playback-devices-availability-information" aria-label="Permalink for Section 5.2.1.3"></a></div>
            
            <p>
              When the <a data-link-type="idl" data-lt="watchAvailability()" href="#dom-remoteplayback-watchavailability" class="internalDFN" id="ref-for-dom-remoteplayback-watchavailability-5"><code>watchAvailability</code></a><code>()</code> method is
              called, the user agent <em class="rfc2119">MUST</em> run the following steps:
            </p>
            <dl>
              <dt>
                Input
              </dt>
              <dd>
                <var data-type="RemotePlaybackAvailabilityCallback">callback</var>, the callback that
                will get fired with availability information.
              </dd>
              <dt>
                Output
              </dt>
              <dd>
                <var data-type="Promise">promise</var>, a <a data-link-type="idl" data-lt="Promise" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>.
              </dd>
            </dl>
            <ol>
              <li>
                Let <var data-type="Promise">promise</var> be a new <a data-link-type="idl" data-lt="Promise" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>.
              </li>
              <li>
                Return <var data-type="Promise">promise</var>, and run the following steps below:
              </li>
              <li>
                If the <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl" id="ref-for-dom-htmlmediaelement-disableremoteplayback-1"><code>disableRemotePlayback</code></a>
                attribute is present for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>, reject the <var data-type="Promise">promise</var>
                with <a data-link-type="idl" data-lt="InvalidStateError" data-type="exception" href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a> and abort all the remaining steps.
              </li>
              <li>
                If the user agent is unable to <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-9">monitor the list of
                available remote playback devices</a> for the entire lifetime of
                the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a> (for instance, because the user has
                disabled this feature), then run the following steps <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>:
                <ol>
                  <li>
                    Fulfill <var data-type="Promise">promise</var>.
                  </li>
                  <li>
                    <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to invoke the <var data-type="RemotePlaybackAvailabilityCallback">callback</var> with
                    <code>false</code> as its argument.
                  </li>
                  <li>
                    Abort all remaining steps.
                  </li>
                </ol>
              </li>
              <li>
                If the user agent is unable to continuously <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-10">monitor the
                list of available remote playback devices</a> but can do it for a
                short period of time when <a data-lt="initiate remote playback" href="#dfn-initiate-remote-playback" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-initiate-remote-playback-3">
                initiating remote playback</a>, then:
                <ol>
                  <li>
                    Reject <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a> exception.
                  </li>
                  <li>
                    Abort all remaining steps.
                  </li>
                </ol>
              </li>
              <li>
                Let <var data-type="long">callbackId</var> be a positive integer unique among
                all the <var>callbackIds</var> previously returned by these
                steps in the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a> of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media
                element</a>.
              </li>
              <li>
                Create a tuple <em>(<var data-type="long">callbackId</var>, <var data-type="RemotePlaybackAvailabilityCallback">callback</var>)</em> and
                add it to the <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-6">set of availability callbacks</a>
                for this <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>.
              </li>
              <li>
                Fulfill <var data-type="Promise">promise</var> with the <var data-type="long">callbackId</var> and
                run the following steps <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>:
                <ol>
                  <li>
                    <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to invoke the <var data-type="RemotePlaybackAvailabilityCallback">callback</var> with
                    the current <a href="#dfn-availability" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-2">availability</a> for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media
                    element</a>.
                  </li>
                  <li>If the user agent is not <a data-lt="monitor the list of available remote playback devices" href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-11">monitoring
                  the list of available remote playback devices</a>, run the
                  algorithm to <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-12">monitor the list of available remote playback
                  devices</a>.
                  </li>
                </ol>
              </li>
            </ol>
            <div class="note" role="note" id="issue-container-generatedID-4"><div role="heading" class="note-title marker" id="h-note-4" aria-level="6"><span>Note</span></div><p class="">
              A simple algorithm for assigning <var data-type="long">callbackId</var> values is
              to keep a counter for each <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a> and
              incrementing it in step 6.
            </p></div>
            <div class="note" role="note" id="issue-container-generatedID-5"><div role="heading" class="note-title marker" id="h-note-5" aria-level="6"><span>Note</span></div><div class="">
              To avoid leaking information that could fingerprint the user, the
              user agent is expected not to assign a <var data-type="long">callbackId</var> that
              uses any persistent information from the browser profile or a
              <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-26">remote playback device</a>.
            </div></div>
          </section>
          <section id="monitoring-the-list-of-available-remote-playback-devices"><div class="header-wrapper"><h5 id="x5-2-1-4-monitoring-the-list-of-available-remote-playback-devices"><bdi class="secno">5.2.1.4 </bdi>
              Monitoring the list of available remote playback devices
            </h5><a class="self-link" href="#monitoring-the-list-of-available-remote-playback-devices" aria-label="Permalink for Section 5.2.1.4"></a></div>
            
            <p>
              If the <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-7">set of availability callbacks</a> is non-empty, or
              there is a pending request to <a data-lt="prompt" href="#dom-remoteplayback-prompt" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-prompt-3">
              initiate remote playback</a>, the user agent
              <em class="rfc2119">MUST</em> <dfn id="dfn-monitor-the-list-of-available-remote-playback-devices" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">monitor the list of available remote playback
              devices</dfn> by running the following steps:
            </p>
            <ol>
              <li>
                Retrieve available remote playback devices (using an
                implementation specific mechanism) and let <var data-type="list">newDevices</var>
                be this list.
              </li>
              <li>
                For each <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> known to the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing
                context</a>:
                <ol>
                  <li>
                    If the <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl" id="ref-for-dom-htmlmediaelement-disableremoteplayback-2"><code>disableRemotePlayback</code></a>
                    attribute is present for <var data-type="HTMLMediaElement">mediaElement</var>, abort all
                    the remaining steps for this tuple and continue to the next one.
                  </li>
                  <li>
                    Set <var data-type="boolean">newAvailabilityValue</var> to the value of
                    <a href="#dfn-availability" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-3">availability</a> for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> calculated
                    using the <var data-type="list">newDevices</var> list instead of the <a href="#dfn-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-list-of-available-remote-playback-devices-2">list
                    of available remote playback devices</a>.
                  </li>
                  <li>
                    If the current <a href="#dfn-availability" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-4">availability</a> is not equal to
                    <var data-type="boolean">newAvailabilityValue</var>, then for each <em>(<var data-type="long">callbackId</var>,
                    <var data-type="RemotePlaybackAvailabilityCallback">callback</var>)</em>
                    of the element's <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-8">set of availability callbacks</a>:
                    <ol>
                      <li>
                        <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to invoke <var data-type="RemotePlaybackAvailabilityCallback">callback</var> with
                        <var data-type="boolean">newAvailabilityValue</var> as its argument.
                      </li>
                    </ol>
                  </li>
                </ol>
              </li>
              <li>
                Set the <a href="#dfn-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-list-of-available-remote-playback-devices-3">list of available remote playback devices</a> to
                the value of <var data-type="list">newDevices</var>.
              </li>
            </ol>
          </section>
          <section id="stop-observing-remote-playback-devices-availability"><div class="header-wrapper"><h5 id="x5-2-1-5-stop-observing-remote-playback-devices-availability"><bdi class="secno">5.2.1.5 </bdi>
              Stop observing remote playback devices availability
            </h5><a class="self-link" href="#stop-observing-remote-playback-devices-availability" aria-label="Permalink for Section 5.2.1.5"></a></div>
            
            <p>
              When a <dfn data-dfn-for="RemotePlayback" data-export="" data-dfn-type="method" id="dom-remoteplayback-cancelwatchavailability" data-idl="operation" data-title="cancelWatchAvailability()" data-type="Promise" data-lt="cancelWatchAvailability()|cancelWatchAvailability(id)" data-local-lt="RemotePlayback.cancelWatchAvailability|RemotePlayback.cancelWatchAvailability()|cancelWatchAvailability" tabindex="0" aria-haspopup="dialog"><code>cancelWatchAvailability()</code></dfn>
              method is called, the user agent <em class="rfc2119">MUST</em> run the following steps:
            </p>
            <dl>
              <dt>
                Input
              </dt>
              <dd>
                <var data-type="long">id</var>, the callback identifier.
              </dd>
              <dt>
                Output
              </dt>
              <dd>
                <var data-type="Promise">promise</var>, a <a data-link-type="idl" data-lt="Promise" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>.
              </dd>
            </dl>
            <ol>
              <li>
                Let <var data-type="Promise">promise</var> be a new <a data-link-type="idl" data-lt="Promise" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>.
              </li>
              <li>
                Return <var data-type="Promise">promise</var>, and run the following steps below:
              </li>
              <li>
                If the <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl" id="ref-for-dom-htmlmediaelement-disableremoteplayback-3"><code>disableRemotePlayback</code></a> attribute is present
                for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>, reject <var data-type="Promise">promise</var> with
                <a data-link-type="idl" data-lt="InvalidStateError" data-type="exception" href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a> and abort all the remaining steps.
              </li>
              <li>
                If the parameter <var data-type="long">id</var> is <code>undefined</code>,
                clear the <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-9">set of availability callbacks</a>.
              </li>
              <li>
                Otherwise, if <var data-type="long">id</var> matches the <var data-type="long">callbackId</var>
                for any entry in the <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-10">set of availability callbacks</a>, remove
                the entry from the set.
              </li>
              <li>
                Otherwise, reject <var data-type="Promise">promise</var> with
                <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> and abort all the remaining steps.
              </li>
              <li>
                If the <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-11">set of availability callbacks</a> is now empty and
                there is no pending request to
                <a data-lt="prompt" href="#dom-remoteplayback-prompt" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-prompt-4">initiate remote playback</a>, cancel any
                pending task to <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-13">monitor the list of available remote
                playback devices</a> for power saving purposes.
              </li>
              <li>
                Fulfill <var data-type="Promise">promise</var>.
              </li>
            </ol>
            <div class="note" role="note" id="issue-container-generatedID-6"><div role="heading" class="note-title marker" id="h-note-6" aria-level="6"><span>Note</span></div><div class="">
              The mechanism used to monitor <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-27">remote playback devices</a>
              availability and determine the compatibility of a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-28">remote
              playback device</a> with the selected <a href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-sources-set-6">availability sources
              set</a> is left to the user agent.
            </div></div>
          </section>
        </section>
        <section data-link-for="RemotePlayback" id="prompt-user-for-changing-remote-playback-state"><div class="header-wrapper"><h4 id="x5-2-2-prompt-user-for-changing-remote-playback-state"><bdi class="secno">5.2.2 </bdi>
            Prompt user for changing remote playback state
          </h4><a class="self-link" href="#prompt-user-for-changing-remote-playback-state" aria-label="Permalink for Section 5.2.2"></a></div>
          
          <p>
            When the <dfn data-dfn-for="RemotePlayback" data-export="" data-dfn-type="method" id="dom-remoteplayback-prompt" data-idl="operation" data-title="prompt()" data-type="Promise" data-lt="prompt()" data-local-lt="RemotePlayback.prompt|RemotePlayback.prompt()|prompt" tabindex="0" aria-haspopup="dialog"><code>prompt()</code></dfn> method is
            called, the user agent <em class="rfc2119">MUST</em> run the following steps:
          </p>
          <dl>
            <dt>
              Input
            </dt>
            <dd>
              None, but the algorithm references the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>, its
              <a data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-7">remote</a> property and its
              <a href="#dfn-availability-sources-set" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-availability-sources-set-7">availability sources set</a>.
            </dd>
            <dt>
              Output
            </dt>
            <dd>
              A <a data-link-type="idl" data-lt="Promise" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>.
            </dd>
          </dl>
          <ol>
            <li>
              Let <var data-type="Promise">promise</var> be a new <a data-link-type="idl" data-lt="Promise" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-promise"><code>Promise</code></a>.
            </li>
            <li>
              Return <var data-type="Promise">promise</var> and continue running these steps
              <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in parallel</a>.
            </li>
            <li>
              If the <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl" id="ref-for-dom-htmlmediaelement-disableremoteplayback-4"><code>disableRemotePlayback</code></a> attribute is present
              for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>, reject the <var data-type="Promise">promise</var> with
              <a data-link-type="idl" data-lt="InvalidStateError" data-type="exception" href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a> and abort all the remaining steps.
            </li>
            <li>
              If there is already an unsettled promise from a previous call to
              <a data-link-type="idl" data-lt="prompt()" href="#dom-remoteplayback-prompt" class="internalDFN" id="ref-for-dom-remoteplayback-prompt-5"><code>prompt</code></a><code>()</code> for the same <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> or
              even for the same <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a>, the user agent <em class="rfc2119">MAY</em> reject
              <var data-type="Promise">promise</var> with an <a data-link-type="idl" data-lt="OperationError" data-type="exception" href="https://webidl.spec.whatwg.org/#operationerror"><code>OperationError</code></a> exception and abort all
              remaining steps.
              <div class="note" role="note" id="issue-container-generatedID-7"><div role="heading" class="note-title marker" id="h-note-7" aria-level="5"><span>Note</span></div><div class="">
                The rationale here is that the user agent might show a dialog
                that's modal to either the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> or the
                <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a>. In such a case, the second call to
                <a data-link-type="idl" data-lt="prompt()" href="#dom-remoteplayback-prompt" class="internalDFN" id="ref-for-dom-remoteplayback-prompt-6"><code>prompt</code></a><code>()</code> would not be able to show any UI.
              </div></div>
            </li>
            <li>
              If the document's <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#nav-window">active window</a> does not have
              <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/interaction.html#transient-activation">transient activation</a>, reject <var data-type="Promise">promise</var> with an
              <a data-link-type="idl" data-lt="InvalidAccessError" data-type="exception" href="https://webidl.spec.whatwg.org/#invalidaccesserror"><code>InvalidAccessError</code></a> exception and abort these steps.
            </li>
            <li>
              OPTIONALLY, if the user agent knows a priori that remote playback
              of this particular <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> is not feasible (independent
              of the current <a href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-state-3"><code>state</code></a> or the <a href="#dfn-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-list-of-available-remote-playback-devices-4">list of available remote
              playback devices</a>), reject <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotSupportedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notsupportederror"><code>NotSupportedError</code></a>
              and abort all remaining steps.
              <div class="note" role="note" id="issue-container-generatedID-8"><div role="heading" class="note-title marker" id="h-note-8" aria-level="5"><span>Note</span></div><div class="">
                An example of this situation is when the user agent only
                supports <a href="#dfn-media-flinging" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-flinging-2">media flinging</a>, and the media element's source
                is not a <a data-link-type="idl" data-lt="URL" data-type="interface" href="https://url.spec.whatwg.org/#url"><code>URL</code></a> that can be passed to a
                <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-29">remote playback device</a>.
              </div></div>
            </li>
            <li>
              If the user agent needs to show the <a href="#dfn-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-list-of-available-remote-playback-devices-5">list of available remote
              playback devices</a> and is not <a data-lt="monitor the list of
              available remote playback devices" href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-14">monitoring the list of
              available remote playback devices</a>, run the steps to
              <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-15">monitor the list of available remote playback devices</a> <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/infrastructure.html#in-parallel">in
              parallel</a>.
            </li>
            <li>
              If remote playback is <a href="#dfn-unavailable" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-unavailable-2">unavailable</a> and will remain so
              before the request for user permission is complete,
              reject <var data-type="Promise">promise</var> with a <a data-link-type="idl" data-lt="NotFoundError" data-type="exception" href="https://webidl.spec.whatwg.org/#notfounderror"><code>NotFoundError</code></a> exception and
              abort all remaining steps.
            </li>
            <li>
              Request user permission to <dfn id="dfn-change-remote-playback-state" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">change remote playback
              state</dfn>.
              <div class="note" role="note" id="issue-container-generatedID-9"><div role="heading" class="note-title marker" id="h-note-9" aria-level="5"><span>Note</span></div><div class="">
                An example UI to request permission would allow the user to
                pick a new <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-30">remote playback device</a>, switch between local
                or remote playback devices, or <a href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-disconnect-from-a-remote-playback-device-1">disconnect from a remote
                playback device</a>.
              </div></div>
              <div class="note" role="note" id="issue-container-generatedID-10"><div role="heading" class="note-title marker" id="h-note-10" aria-level="5"><span>Note</span></div><div class="">
                The user may have already selected a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-31">remote playback
                device</a> for a related purpose, for example, to mirror the
                contents of the display or the current page. In that case, the
                user agent may choose to skip the UI to select a device and
                proceed immediately to the next step.
              </div></div>
            </li>
            <li>
              If the user picked a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-32">remote playback device</a> <var data-type="remote
              playback device">device</var> to <dfn id="dfn-initiate-remote-playback" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">initiate remote playback</dfn> with, the
              user agent <em class="rfc2119">MUST</em> run the following steps:
              <ol>
                <li>
                  Set the <a href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-state-4"><code>state</code></a> of the <var data-type="RemotePlayback">remote</var> object
                  to <a href="#dom-remoteplaybackstate-connecting" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplaybackstate-connecting-2"><code>connecting</code></a>.
                </li>
                <li>
                  Fulfill <var data-type="Promise">promise</var>.
                </li>
                <li>
                  <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to <a data-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">fire an event</a> named
                  <a href="#dfn-connecting" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-connecting-1"><code>connecting</code></a> at the <a data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-8">remote</a> property of the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media
                  element</a>. The event must not bubble, must not be
                  cancelable, and has no default action.
                </li>
                <li>
                  <a href="#dfn-establish-a-connection-with-the-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-establish-a-connection-with-the-remote-playback-device-1">Establish a connection with the remote playback device</a>
                  <var data-type="remote
              playback device">device</var> for the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>.
                </li>
              </ol>
              <div class="note" role="note" id="issue-container-generatedID-11"><div role="heading" class="note-title marker" id="h-note-11" aria-level="5"><span>Note</span></div><p class="">
                By picking a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-33">remote playback device</a> the user <em>grants
                permission</em> to use the device.
              </p></div>
            </li>
            <li>
              Otherwise, if the user chose to disconnect from the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-34">remote
              playback device</a> <var data-type="remote
              playback device">device</var>, the user agent <em class="rfc2119">MUST</em> run the
              following steps:
              <ol>
                <li>
                  Fulfill <var data-type="Promise">promise</var>.
                </li>
                <li>
                  Run the <a href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-disconnect-from-a-remote-playback-device-2">disconnect from a remote playback device</a>
                  algorithm for the <var data-type="remote
              playback device">device</var>.
                </li>
              </ol>
            </li>
            <li>
              Otherwise, the user is considered to <em>deny permission</em> to
              use the device, so reject <var data-type="Promise">promise</var> with <a data-link-type="idl" data-lt="NotAllowedError" data-type="exception" href="https://webidl.spec.whatwg.org/#notallowederror"><code>NotAllowedError</code></a>
              exception and hide the UI shown by the user agent.
            </li>
          </ol>
          <div class="note" role="note" id="issue-container-generatedID-12"><div role="heading" class="note-title marker" id="h-note-12" aria-level="5"><span>Note</span></div><div class="">
            The details of implementing the UI and device selection are left to
            the user agent; for example it can show the user a dialog and allow
            the user to select an available device (<em>granting
            permission</em>), or cancel the selection (<em>denying
            permission</em>). In most cases, available devices will advertise
            a user friendly name along with locale and text direction
            information for that name. The user agent is encouraged to render
            this user friendly name, using its locale and text direction when
            they are known.
          </div></div>
        </section>
        <section id="the-state-attribute"><div class="header-wrapper"><h4 id="x5-2-3-the-state-attribute"><bdi class="secno">5.2.3 </bdi>
            The <dfn data-dfn-for="RemotePlayback" data-export="" data-dfn-type="attribute" id="dom-remoteplayback-state" data-idl="attribute" data-title="state" data-type="RemotePlaybackState" data-lt="state" data-local-lt="RemotePlayback.state" tabindex="0" aria-haspopup="dialog"><code>state</code></dfn> attribute
          </h4><a class="self-link" href="#the-state-attribute" aria-label="Permalink for Section 5.2.3"></a></div>
          
          <p>
            The <a data-link-type="idl" href="#dom-remoteplayback-state" class="internalDFN" id="ref-for-dom-remoteplayback-state-5"><code>state</code></a> attribute represents the
            <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-9"><code>RemotePlayback</code></a> connection's current state. It can take one of
            the values of <a data-link-type="idl" data-lt="RemotePlaybackState" href="#dom-remoteplaybackstate" class="internalDFN" id="ref-for-dom-remoteplaybackstate-3"><code>RemotePlaybackState</code></a> depending on the connection
            state:
          </p>
          <ul>
            <li>
              <dfn data-dfn-for="RemotePlaybackState" data-export="" data-dfn-type="enum-value" id="dom-remoteplaybackstate-connecting" data-idl="enum-value" data-title="connecting" tabindex="0" aria-haspopup="dialog"><code>connecting</code></dfn> means
              that the user agent is attempting to <a href="#dfn-initiate-remote-playback" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-initiate-remote-playback-4">initiate remote
              playback</a> with the selected <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-35">remote playback device</a>. This
              is the initial state when the <code>promise</code> returned by
              <a data-link-type="idl" data-lt="prompt()" href="#dom-remoteplayback-prompt" class="internalDFN" id="ref-for-dom-remoteplayback-prompt-7"><code>prompt</code></a><code>()</code> is fulfilled. The local playback of
              the media element continues in this state and media commands still
              take effect on the <a href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-state-1">local playback state</a>.
            </li>
            <li>
              <dfn data-dfn-for="RemotePlaybackState" data-export="" data-dfn-type="enum-value" id="dom-remoteplaybackstate-connected" data-idl="enum-value" data-title="connected" tabindex="0" aria-haspopup="dialog"><code>connected</code></dfn> means that
              the transition from local to remote playback has finished and all
              media commands now take effect on the <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-2">remote playback
              state</a>.
            </li>
            <li>
              <dfn data-dfn-for="RemotePlaybackState" data-export="" data-dfn-type="enum-value" id="dom-remoteplaybackstate-disconnected" data-idl="enum-value" data-title="disconnected" tabindex="0" aria-haspopup="dialog"><code>disconnected</code></dfn> means
              that the remote playback has not been <a data-lt="initiate remote
              playback" href="#dfn-initiate-remote-playback" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-initiate-remote-playback-5">initiated</a>, has failed to initiate or has been
              stopped. All media commands will take effect on the <a href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-state-2">local
              playback state</a>. The remote playback can be initiated through a
              call to <a data-link-type="idl" data-lt="prompt()" href="#dom-remoteplayback-prompt" class="internalDFN" id="ref-for-dom-remoteplayback-prompt-8"><code>prompt</code></a><code>()</code>.
            </li>
          </ul>
        </section>
        <section data-link-for="RemotePlayback" id="establishing-a-connection-with-a-remote-playback-device"><div class="header-wrapper"><h4 id="x5-2-4-establishing-a-connection-with-a-remote-playback-device"><bdi class="secno">5.2.4 </bdi>
            Establishing a connection with a remote playback device
          </h4><a class="self-link" href="#establishing-a-connection-with-a-remote-playback-device" aria-label="Permalink for Section 5.2.4"></a></div>
          
          <p>
            When the user agent is to <dfn id="dfn-establish-a-connection-with-the-remote-playback-device" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">establish a connection with
            the remote playback device</dfn>, it <em class="rfc2119">MUST</em> run the following steps:
          </p>
          <dl>
            <dt>
              Input
            </dt>
            <dd>
              <var data-type="RemotePlayback">remote</var>, the <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-10"><code>RemotePlayback</code></a> object that is to be
              connected.
            </dd>
            <dd>
              <var data-type="remote playback device">device</var>, the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-36">remote playback device</a> to
              connect to.
            </dd>
          </dl>
          <ol>
            <li>
              If the <a data-link-type="idl" href="#dom-remoteplayback-state" class="internalDFN" id="ref-for-dom-remoteplayback-state-6"><code>state</code></a> of <var data-type="RemotePlayback">remote</var> is not equal
              to "<a data-link-type="idl" href="#dom-remoteplaybackstate-connecting" class="internalDFN" id="ref-for-dom-remoteplaybackstate-connecting-3"><code>connecting</code></a>", abort all the remaining
              steps.
            </li>
            <li>
              Request connection of <var data-type="RemotePlayback">remote</var> to <var data-type="remote playback device">device</var>.  The implementation of
              this step is specific to the user agent.
            </li>
            <li>
              If connection completes successfully, <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to
              run the following steps:
              <ol>
               <li>
                 Set the <a data-link-type="idl" href="#dom-remoteplayback-state" class="internalDFN" id="ref-for-dom-remoteplayback-state-7"><code>state</code></a> of <var data-type="RemotePlayback">remote</var> to
                 "<a data-link-type="idl" href="#dom-remoteplaybackstate-connected" class="internalDFN" id="ref-for-dom-remoteplaybackstate-connected-2"><code>connected</code></a>".
                </li>
                <li>
                  <a data-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">Fire an event</a> named <a href="#dfn-connect" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-connect-1"><code>connect</code></a> at <var data-type="RemotePlayback">remote</var>.
                </li>
               <li>
                 Synchronize the current <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-7">media element state</a> with the
                 <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-3">remote playback state</a>. The implementation of this step
                 is specific to the user agent.
                </li>
              </ol>
            </li>
            <li>
              If connection fails, <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">queue a task</a> to run the following
              steps:
              <ol>
                <li>
                  Set the <a data-lt="state" href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-state-8">remote playback state</a> of
                  <var data-type="RemotePlayback">remote</var> to "<a data-link-type="idl" href="#dom-remoteplaybackstate-disconnected" class="internalDFN" id="ref-for-dom-remoteplaybackstate-disconnected-2"><code>disconnected</code></a>".
                </li>
                <li>
                  <a data-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">Fire an event</a> named <a data-link-type="idl" href="#dfn-disconnect" class="internalDFN" id="ref-for-dfn-disconnect-1"><code><code>disconnect</code></code></a> at <var data-type="RemotePlayback">remote</var>.
                </li>
              </ol>
            </li>
          </ol>
          <p>
            The user agent <em class="rfc2119">SHOULD</em> pause local audio and video output of the
            media element while the <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-4">remote playback state</a> is
            "<a data-link-type="idl" href="#dom-remoteplaybackstate-connected" class="internalDFN" id="ref-for-dom-remoteplaybackstate-connected-3"><code>connected</code></a>".
          </p>
          <p>
            If the user agent
            is <a href="https://html.spec.whatwg.org/multipage/#expose-a-user-interface-to-the-user"> exposing
            a user interface to the user</a> for the media element (i.e., using
            default controls), the user agent <em class="rfc2119">SHOULD</em> convey the fact that
            the <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-5">remote playback state</a> is
            "<a data-link-type="idl" href="#dom-remoteplaybackstate-connected" class="internalDFN" id="ref-for-dom-remoteplaybackstate-connected-4"><code>connected</code></a>" through an icon or other means.
          </p>
          <div class="note" role="note" id="issue-container-generatedID-13"><div role="heading" class="note-title marker" id="h-note-13" aria-level="5"><span>Note</span></div><div class="">
            The mechanisms that are used to connect the user agent with the
            <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-37">remote playback device</a>, select the <a href="#dfn-remote-playback-source" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-source-6">remote playback
            source</a>, and initiate playback are all implementation choices of
            the user agent. The connection will likely have to provide a two-way
            messaging abstraction capable of carrying media commands to the
            remote playback device and receiving media playback state in order
            to keep the <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-8">media element state</a> and <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-6">remote playback
            state</a> in sync (unless <a href="#dfn-media-mirroring" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-mirroring-2">media mirroring</a> is used).
          </div></div>
          <div class="note" role="note" id="issue-container-generatedID-14"><div role="heading" class="note-title marker" id="h-note-14" aria-level="5"><span>Note</span></div><div class="">
            The user agent is encouraged to pass locale and text direction
            information to the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-38">remote playback device</a> when possible, so
            that the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-39">remote playback device</a> can adjust its user interface
            and operational functions to locale-specific attributes that reflect
            the user's preferences. For example, the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-40">remote playback
            device</a> can use that information to choose the same default text
            track as the user agent, as well as to set the HTTP
            <code>Accept-Language</code> header it sends to fetch media resources.
          </div></div>
          <div class="note" role="note" id="issue-container-generatedID-15"><div role="heading" class="note-title marker" id="h-note-15" aria-level="5"><span>Note</span></div><div class="">
            The user agent should not render output from the media element while
            it is in a "<a data-link-type="idl" href="#dom-remoteplaybackstate-connected" class="internalDFN" id="ref-for-dom-remoteplaybackstate-connected-5"><code>connected</code></a>" state and its content
            is being rendered on a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-41">remote playback device</a>.
          </div></div>
        </section>
        <section data-link-for="RemotePlayback" id="browser-initiated-remote-playback"><div class="header-wrapper"><h4 id="x5-2-5-browser-initiated-remote-playback"><bdi class="secno">5.2.5 </bdi>
            Browser initiated remote playback
          </h4><a class="self-link" href="#browser-initiated-remote-playback" aria-label="Permalink for Section 5.2.5"></a></div>
          
          <p>
            A user agent <em class="rfc2119">MAY</em> support <a data-lt="establish a connection with the remote playback device" href="#dfn-establish-a-connection-with-the-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-establish-a-connection-with-the-remote-playback-device-2">connecting
            to a remote playback device</a> from the browser. This can be done by
            adding appropriate media controls to <a href="https://html.spec.whatwg.org/multipage/#expose-a-user-interface-to-the-user">the user interface that is
            exposed to the user</a>, or when the user activates system-wide
            mirroring of the display.  This feature is known as <dfn id="dfn-browser-initiated-remote-playback" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">browser
            initiated remote playback</dfn>. A user agent that supports
            <a href="#dfn-browser-initiated-remote-playback" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-browser-initiated-remote-playback-1">browser initiated remote playback</a> <em class="rfc2119">SHOULD</em> initiate the remote
            playback only when the user has expressed an intention to do so via
            a user gesture, for example by clicking a button in the browser.
          </p>
          <p>
            If the user agent supports <a href="#dfn-browser-initiated-remote-playback" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-browser-initiated-remote-playback-2">browser initiated remote playback</a>,
            the <a href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-state-9"><code>state</code></a> attribute <em class="rfc2119">MUST</em> reflect the current state of the
            connection to the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-42">remote playback device</a>.  When the browser
            initiates or terminates remote playback, it <em class="rfc2119">MUST</em> fire the corresponding
            events by following the algorithms to <a href="#dfn-establish-a-connection-with-the-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-establish-a-connection-with-the-remote-playback-device-3">establish a connection
            with the remote playback device</a> and
            <a href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-disconnect-from-a-remote-playback-device-3">disconnect from a remote playback device</a>.
          </p>
          <p>
            If the <a data-lt="browser initiated remote playback" href="#dfn-browser-initiated-remote-playback" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-browser-initiated-remote-playback-3">browser will
            initiate remote playback</a> on a newly created media element, it
            <em class="rfc2119">SHOULD</em> initialize the value of its <a href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-state-10"><code>state</code></a> attribute to
            "<a data-link-type="idl" href="#dom-remoteplaybackstate-connecting" class="internalDFN" id="ref-for-dom-remoteplaybackstate-connecting-4"><code>connecting</code></a>" and then follow the steps
            to <a href="#dfn-establish-a-connection-with-the-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-establish-a-connection-with-the-remote-playback-device-4">establish a connection with the remote playback device</a>.
          </p>
          <div class="note" role="note" id="issue-container-generatedID-16"><div role="heading" class="note-title marker" id="h-note-16" aria-level="5"><span>Note</span></div><div class="">
            A user agent that implements browser initiated remote playback
            should consider how it interacts with other browser policies that
            affect media playback, such as which <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media elements</a>
            are <a href="https://html.spec.whatwg.org/multipage/#allowed-to-play">allowed to play</a>
            and background media playback optimizations.
          </div></div>
        </section>
        <section id="media-commands-and-media-playback-state"><div class="header-wrapper"><h4 id="x5-2-6-media-commands-and-media-playback-state"><bdi class="secno">5.2.6 </bdi>
            Media commands and media playback state
          </h4><a class="self-link" href="#media-commands-and-media-playback-state" aria-label="Permalink for Section 5.2.6"></a></div>
          
          <p>
            The <a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a> interface interacts with the remotely
            played media as soon as the connection with the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-43">remote playback
            device</a> is established.
          </p>
          <p>
            When the <a data-link-type="idl" href="#dom-remoteplayback-state" class="internalDFN" id="ref-for-dom-remoteplayback-state-11"><code>state</code></a> of a <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-11"><code>RemotePlayback</code></a> object is
            "<a data-link-type="idl" href="#dom-remoteplaybackstate-connected" class="internalDFN" id="ref-for-dom-remoteplaybackstate-connected-6"><code>connected</code></a>", the following conditions relate
            the <a href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-state-3">local playback state</a>, the <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-9">media element state</a>, and
            the <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-7">remote playback state</a>:
          </p>
          <ul>
            <li>
              The user agent <em class="rfc2119">MUST</em> send all media commands issued on the
              associated <a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a> object to the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-44">remote playback
              device</a> in order to change its <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-8">remote playback state</a>;
            </li>
            <li>
              The <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-45">remote playback device</a> <em class="rfc2119">SHOULD</em> implement all media
              commands sent by the user agent;
            </li>
            <li>
              The <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-46">remote playback device</a> <em class="rfc2119">SHOULD</em> send updates of
              the <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-9">remote playback state</a> to the user agent that
              affect any attribute exposed through the <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-10">media element
              state</a>;
            </li><li>
              The user agent <em class="rfc2119">MUST</em> process all updates of the
              <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-10">remote playback state</a> received from the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-47">remote playback
              device</a> and update the <a href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-state-4">local playback state</a> of the
              media element accordingly.
            </li>
          </ul>
          <p>
            If sending any command fails, the user agent <em class="rfc2119">MAY</em>
            <a href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-disconnect-from-a-remote-playback-device-4">disconnect from a remote playback device</a>.
          </p>
          <div class="note" role="note" id="issue-container-generatedID-17"><div role="heading" class="note-title marker" id="h-note-17" aria-level="5"><span>Note</span></div><div class="">
            <p>
              The <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-48">remote playback device</a> can implement a subset
              of the capabilities of the playback engine of the user
              agent, and some <a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a> APIs do not always
              make sense to use during remote playback. In this case, the
              <a href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-state-5">local playback state</a> is expected to reflect as closely
              as possible the actual <a href="#dfn-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-state-11">remote playback state</a> after a
              media command that is not supported during remote playback.
            </p>
            <p>
              For example, after calling <a data-link-type="idl" data-lt="fastSeek()" data-type="method" href="https://html.spec.whatwg.org/multipage/media.html#dom-media-fastseek"><code>fastSeek</code></a><code>()</code>
              while connected to a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-49">remote playback device</a> that does not
              support it, the <a data-link-type="idl" data-type="attribute" href="https://html.spec.whatwg.org/multipage/media.html#dom-media-seeking"><code>seeking</code></a> attribute of the
              <a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a> is expected to remain <code>false</code> and no
              <a href="https://html.spec.whatwg.org/multipage/#event-media-seeking"><code>seeking</code></a> event is to be fired.
            </p>
          </div></div>
        </section>
        <section id="disconnecting-from-a-remote-playback-device"><div class="header-wrapper"><h4 id="x5-2-7-disconnecting-from-a-remote-playback-device"><bdi class="secno">5.2.7 </bdi>
            Disconnecting from a remote playback device
          </h4><a class="self-link" href="#disconnecting-from-a-remote-playback-device" aria-label="Permalink for Section 5.2.7"></a></div>
          
          <p>
            When the user agent is to <dfn id="dfn-disconnect-from-a-remote-playback-device" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">disconnect from a remote
            playback device</dfn>, it <em class="rfc2119">MUST</em> do the following:
          </p>
          <dl>
            <dt>
              Input
            </dt>
            <dd>
              <var data-type="RemotePlayback">remote</var>, the <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-12"><code>RemotePlayback</code></a> object
              representing the playback to be stopped.
            </dd>
            <dd>
              <var data-type="remote playback device">device</var>, the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-50">remote playback device</a>
              to disconnect from.
            </dd>
          </dl>
          <ol>
            <li>
              If the <a href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-state-12"><code>state</code></a>
              of <var data-type="RemotePlayback">remote</var> is <code>disconnected</code>, abort all remaining steps.
            </li>
            <li>
              <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#queue-a-task">Queue a task</a> to run the following steps:
              <ol>
                <li>
                  Request disconnection of <var data-type="RemotePlayback">remote</var> from <var data-type="remote playback device">device</var>. The
                  implementation of this step is specific to the user agent.
                </li>
                <li>
                  Change the <var data-type="RemotePlayback">remote</var>'s <code>state</code> to <code>disconnected</code>.
                </li>
                <li>
                  <a data-type="dfn" href="https://dom.spec.whatwg.org/#concept-event-fire">Fire an event</a> named <a data-link-type="idl" href="#dfn-disconnect" class="internalDFN" id="ref-for-dfn-disconnect-2"><code><code>disconnect</code></code></a> at <var data-type="RemotePlayback">remote</var>.
                </li>
                <li>
                  Synchronize the current <a href="#dfn-media-element-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-element-state-11">media element state</a> with the
                  <a href="#dfn-local-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-state-6">local playback state</a>. The implementation of this step
                  is specific to the user agent.
                </li>
              </ol>
            </li>
          </ol>
          <p>
            If the remote playback device is abruptly disconnected during
            playback (for example, by power loss or a network disconnection),
            the user agent <em class="rfc2119">SHOULD</em> run the steps to <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-16">monitor the list of
            available remote playback devices</a> before the steps to
            <a href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-disconnect-from-a-remote-playback-device-5">disconnect from a remote playback device</a>.  This allows
            callbacks in the <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-12">set of availability callbacks</a> to be invoked
            before the <a data-link-type="idl" href="#dfn-disconnect" class="internalDFN" id="ref-for-dfn-disconnect-3"><code><code>disconnect</code></code></a> event is fired, so the page can update
            itself to show resumption of playback is not possible.
          </p>
          <div class="note" role="note" id="issue-container-generatedID-18"><div role="heading" class="note-title marker" id="h-note-18" aria-level="5"><span>Note</span></div><div class="">
            The remote playback device might not actually stop playback of the
            media when requested by the user agent; it depends on the
            implementation of the user agent and the remote playback device.
            In this case, stopping remote playback means that the user agent
            merely disconnects from the remote playback device and the
            <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a> switches to the <code>disconnected</code> state.
          </div></div>
        </section>
        <section id="event-handlers"><div class="header-wrapper"><h4 id="x5-2-8-event-handlers"><bdi class="secno">5.2.8 </bdi>
            Event Handlers
          </h4><a class="self-link" href="#event-handlers" aria-label="Permalink for Section 5.2.8"></a></div>
          
          <p>
            The following are the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handlers</a> (and their corresponding
            <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handler-event-type">event handler event types</a>) that must be supported, as
            <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/webappapis.html#event-handlers">event handler</a> IDL attributes, by objects implementing the
            <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-13"><code>RemotePlayback</code></a> interface:
          </p>
          <table data-dfn-for="RemotePlayback">
            <thead>
              <tr>
                <th>
                  Event handler
                </th>
                <th>
                  Event handler event type
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <dfn data-export="" data-dfn-type="attribute" id="dom-remoteplayback-onconnecting" data-idl="attribute" data-title="onconnecting" data-dfn-for="RemotePlayback" data-type="EventHandler" data-lt="onconnecting" data-local-lt="RemotePlayback.onconnecting" tabindex="0" aria-haspopup="dialog"><code>onconnecting</code></dfn>
                </td>
                <td>
                  <dfn data-dfn-type="event" id="dfn-connecting" tabindex="0" aria-haspopup="dialog" data-export=""><code>connecting</code></dfn>
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-export="" data-dfn-type="attribute" id="dom-remoteplayback-onconnect" data-idl="attribute" data-title="onconnect" data-dfn-for="RemotePlayback" data-type="EventHandler" data-lt="onconnect" data-local-lt="RemotePlayback.onconnect" tabindex="0" aria-haspopup="dialog"><code>onconnect</code></dfn>
                </td>
                <td>
                  <dfn data-dfn-type="event" id="dfn-connect" tabindex="0" aria-haspopup="dialog" data-export=""><code>connect</code></dfn>
                </td>
              </tr>
              <tr>
                <td>
                  <dfn data-export="" data-dfn-type="attribute" id="dom-remoteplayback-ondisconnect" data-idl="attribute" data-title="ondisconnect" data-dfn-for="RemotePlayback" data-type="EventHandler" data-lt="ondisconnect" data-local-lt="RemotePlayback.ondisconnect" tabindex="0" aria-haspopup="dialog"><code>ondisconnect</code></dfn>
                </td>
                <td>
                  <dfn data-dfn-type="event" id="dfn-disconnect" tabindex="0" aria-haspopup="dialog" data-export=""><code>disconnect</code></dfn>
                </td>
              </tr>
            </tbody>
          </table>
        </section>
      </section>
      <section data-dfn-for="HTMLMediaElement" id="extensions-to-htmlmediaelement"><div class="header-wrapper"><h3 id="x5-3-extensions-to-htmlmediaelement"><bdi class="secno">5.3 </bdi>
          Extensions to <a data-link-type="idl" data-lt="HTMLMediaElement" data-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement"><code>HTMLMediaElement</code></a>
        </h3><a class="self-link" href="#extensions-to-htmlmediaelement" aria-label="Permalink for Section 5.3"></a></div>
        
        <pre class="idl def" id="webidl-1396475025"><span class="idlHeader"><a class="self-link" href="#webidl-1396475025">WebIDL</a></span><code><span data-idl="" class="idlInterface" id="idl-def-htmlmediaelement-partial-1" data-title="HTMLMediaElement">partial interface <a data-idl="partial" data-link-type="interface" data-title="HTMLMediaElement" class="idlID" data-dfn-for="HTMLMediaElement" data-type="interface" href="https://html.spec.whatwg.org/multipage/media.html#htmlmediaelement">HTMLMediaElement</a> {<span data-idl="" class="idlAttribute" id="idl-def-htmlmediaelement-remote" data-title="remote" data-dfn-for="HTMLMediaElement">
  [<span class="extAttr"><a data-type="extended-attribute" href="https://webidl.spec.whatwg.org/#SameObject">SameObject</a></span>] readonly attribute<span class="idlType"> <a data-link-type="idl" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-14"><code>RemotePlayback</code></a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-htmlmediaelement-remote" id="ref-for-dom-htmlmediaelement-remote-2"><code>remote</code></a>;</span><span data-idl="" class="idlAttribute" id="idl-def-htmlmediaelement-disableremoteplayback" data-title="disableRemotePlayback" data-dfn-for="HTMLMediaElement">

  [<span class="extAttr"><a data-type="extended-attribute" href="https://html.spec.whatwg.org/multipage/custom-elements.html#cereactions">CEReactions</a></span>] attribute<span class="idlType"> <a data-link-type="idl" data-type="interface" href="https://webidl.spec.whatwg.org/#idl-boolean">boolean</a></span> <a class="internalDFN idlName" data-link-type="attribute" href="#dom-htmlmediaelement-disableremoteplayback" id="ref-for-dom-htmlmediaelement-disableremoteplayback-5"><code>disableRemotePlayback</code></a>;</span>
};</span></code></pre>
        <p>
          The <dfn data-export="" data-dfn-type="attribute" id="dom-htmlmediaelement-remote" data-idl="attribute" data-title="remote" data-dfn-for="HTMLMediaElement" data-type="RemotePlayback" data-lt="remote" data-local-lt="HTMLMediaElement.remote" tabindex="0" aria-haspopup="dialog"><code>remote</code></dfn> attribute <em class="rfc2119">MUST</em>
          return the <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-15"><code>RemotePlayback</code></a> instance associated with the
          <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>.
        </p>
        <section data-link-for="HTMLMediaElement" id="the-disableremoteplayback-attribute"><div class="header-wrapper"><h4 id="x5-3-1-the-disableremoteplayback-attribute"><bdi class="secno">5.3.1 </bdi>
            The <dfn data-export="" data-dfn-type="attribute" id="dom-htmlmediaelement-disableremoteplayback" data-idl="attribute" data-title="disableRemotePlayback" data-dfn-for="HTMLMediaElement" data-type="boolean" data-lt="disableRemotePlayback" data-local-lt="HTMLMediaElement.disableRemotePlayback" tabindex="0" aria-haspopup="dialog"><code>disableRemotePlayback</code></dfn> attribute
          </h4><a class="self-link" href="#the-disableremoteplayback-attribute" aria-label="Permalink for Section 5.3.1"></a></div>
          
          <p>
            Some pages may wish to <a href="#dfn-disable-remote-playback" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-disable-remote-playback-1">disable remote playback</a> of a media
            element; for example, they may prefer to use a <a href="https://www.w3.org/TR/presentation-api/#interface-presentationrequest"><code>PresentationRequest</code></a>
            to present a complete document on a presentation screen. To support
            this use case, a new <code>disableRemotePlayback</code> attribute is added to
            the list of content attributes for <code>audio</code> and <code>video</code> elements.
          </p>
          <p>
            A corresponding <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl" id="ref-for-dom-htmlmediaelement-disableremoteplayback-6"><code>disableRemotePlayback</code></a> IDL attribute which
            reflects the value of each element's <code>disableRemotePlayback</code>
            content attribute is added to the <code>HTMLMediaElement</code> interface.
            The <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl" id="ref-for-dom-htmlmediaelement-disableremoteplayback-7"><code>disableRemotePlayback</code></a> IDL attribute <em class="rfc2119">MUST</em>
            <a href="https://html.spec.whatwg.org/multipage/#reflecting-content-attributes-in-idl-attributes">
            reflect</a> the content attribute of the same name.
          </p>
        </section>
        <section data-link-for="HTMLMediaElement" id="disabling-remote-playback"><div class="header-wrapper"><h4 id="x5-3-2-disabling-remote-playback"><bdi class="secno">5.3.2 </bdi>
            Disabling remote playback
          </h4><a class="self-link" href="#disabling-remote-playback" aria-label="Permalink for Section 5.3.2"></a></div>
          
          <p>
            If the <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl" id="ref-for-dom-htmlmediaelement-disableremoteplayback-8"><code>disableRemotePlayback</code></a> attribute is present
            on the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>, the user agent <em class="rfc2119">MUST NOT</em> play
            the media element remotely or present any UI to do so.
          </p>
          <p>
            When the <a href="#dom-htmlmediaelement-disableremoteplayback" class="internalDFN" data-link-type="idl" id="ref-for-dom-htmlmediaelement-disableremoteplayback-9"><code>disableRemotePlayback</code></a> attribute is added to
            the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media element</a>, the user agent <em class="rfc2119">MUST</em> run the steps
            to <dfn id="dfn-disable-remote-playback" tabindex="0" aria-haspopup="dialog" data-dfn-type="dfn">disable remote playback</dfn>:
          </p>
          <ol>
            <li>Reject any pending promises returned by the
            <a data-link-type="idl" data-lt="RemotePlayback" href="#dom-remoteplayback" class="internalDFN" id="ref-for-dom-remoteplayback-16"><code>RemotePlayback</code></a> methods with <a data-link-type="idl" data-lt="InvalidStateError" data-type="exception" href="https://webidl.spec.whatwg.org/#invalidstateerror"><code>InvalidStateError</code></a>.
            </li>
            <li>Clear the <a href="#dfn-set-of-availability-callbacks" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-set-of-availability-callbacks-13">set of availability callbacks</a> for the media
            element.
            </li>
            <li>If its <a href="#dom-remoteplayback-state" class="internalDFN" data-link-type="idl" id="ref-for-dom-remoteplayback-state-13"><code>state</code></a> is not
            <code>disconnected</code>, run the <a href="#dfn-disconnect-from-a-remote-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-disconnect-from-a-remote-playback-device-6">disconnect from a remote
            playback device</a> algorithm for the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-51">remote playback device</a>
            the media element is connected or connecting to.
            </li>
          </ol>
        </section>
      </section>
    </section>
    <section class="informative" id="security-and-privacy-considerations"><div class="header-wrapper"><h2 id="x6-security-and-privacy-considerations"><bdi class="secno">6. </bdi>
        Security and privacy considerations
      </h2><a class="self-link" href="#security-and-privacy-considerations" aria-label="Permalink for Section 6."></a></div><p><em>This section is non-normative.</em></p>
      
      <section id="personally-identifiable-information"><div class="header-wrapper"><h3 id="x6-1-personally-identifiable-information"><bdi class="secno">6.1 </bdi>
          Personally identifiable information
        </h3><a class="self-link" href="#personally-identifiable-information" aria-label="Permalink for Section 6.1"></a></div>
        
        <p>
          Firing the <code>callback</code> provided via the
          <a data-link-type="idl" data-lt="watchAvailability()" href="#dom-remoteplayback-watchavailability" class="internalDFN" id="ref-for-dom-remoteplayback-watchavailability-6"><code>watchAvailability</code></a><code>()</code> method reveals one bit of
          information about the presence (or non-presence) of a
          <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-52">remote playback device</a> typically discovered through the local
          area network. This could be used in conjunction with other
          information for fingerprinting the user. However, this information is
          also dependent on the user's local network context, so the risk is
          minimized.  Also, by design, the human readable name of a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-53">remote
          playback device</a> is not revealed to the page.
        </p>
        <p>
          The API enables <a data-lt="monitor the list of available remote
          playback devices" href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-17">monitoring the list of available remote playback
          devices</a>. How the user agent determines the compatibility and
          availability of a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-54">remote playback device</a> with a <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#media-element">media
          element</a>'s <a href="https://html.spec.whatwg.org/multipage/#media-resource">resource</a>
          is an implementation detail. If a user agent matches a
          <a href="https://html.spec.whatwg.org/multipage/#media-resource">media resource</a>
          to a particular type of device to determine its availability,
          this feature can be used to probe information about which
          <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-55">remote playback device</a> the user has without user consent.
        </p>
        <p>
          The user agent should not <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-18">monitor the list of available remote
          playback devices</a> if the user disables background monitoring
          through a browser setting.
        </p>
      </section>
      <section id="user-interface-guidelines"><div class="header-wrapper"><h3 id="x6-2-user-interface-guidelines"><bdi class="secno">6.2 </bdi>
          User interface guidelines
        </h3><a class="self-link" href="#user-interface-guidelines" aria-label="Permalink for Section 6.2"></a></div>
        
        <dl>
          <dt>
            Origin display
          </dt>
          <dd>
            <p>
              When the user is asked permission to use a <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-56">remote playback
              device</a> during the steps to <a href="#dfn-change-remote-playback-state" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-change-remote-playback-state-1">change remote playback
              state</a>, the user agent should make it clear what origin the
              request is coming from.
            </p>
            <p>
              Display of the origin requesting remote playback will help the
              user understand what content is making the request, especially
              when the request is initiated from a <a data-link-type="dfn|abstract-op" data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#child-navigable">child navigable</a>. For
              example, embedded content may try to convince the user to click to
              trigger a request to start an unwanted remote playback.
            </p>
            <p>
              Showing the origin that will be presented will help the user know
              if that content is from a <a data-type="dfn" href="https://www.w3.org/TR/secure-contexts/#potentially-trustworthy-origin">potentially trustworthy origin</a>
              (e.g., <code>https:</code>), and corresponds to a known or expected site.
            </p>
          </dd>
        </dl>
      </section>
      <section id="device-access"><div class="header-wrapper"><h3 id="x6-3-device-access"><bdi class="secno">6.3 </bdi>
          Device Access
        </h3><a class="self-link" href="#device-access" aria-label="Permalink for Section 6.3"></a></div>
        
        <p>
          The Remote Playback API abstracts away what "local" means for
          displays, meaning that it exposes network-accessible displays as
          though they were local displays. The Remote Playback API requires
          user permission for a page to access any display to mitigate issues
          that could arise, such as showing unwanted content on a display
          viewable by others.
        </p>
      </section>
      <section id="messaging-between-the-local-and-remote-playback-devices"><div class="header-wrapper"><h3 id="x6-4-messaging-between-the-local-and-remote-playback-devices"><bdi class="secno">6.4 </bdi>
          Messaging between the local and remote playback devices
        </h3><a class="self-link" href="#messaging-between-the-local-and-remote-playback-devices" aria-label="Permalink for Section 6.4"></a></div>
        
        <p>
          This specification will not mandate communication protocols between
          the <a href="#dfn-local-playback-device" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-local-playback-device-5">local playback device</a> and the <a href="#dfn-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-remote-playback-devices-57">remote playback
          device</a>, but the user agent should set some guarantees of message
          confidentiality and authenticity between them.
        </p>
      </section>
      <section id="secure-contexts"><div class="header-wrapper"><h3 id="x6-5-secure-contexts"><bdi class="secno">6.5 </bdi>
          Secure Contexts
        </h3><a class="self-link" href="#secure-contexts" aria-label="Permalink for Section 6.5"></a></div>
        
        <p>
          The Remote Playback API is not limited to [<cite><a class="bibref" data-link-type="biblio" href="#bib-secure-contexts" title="Secure Contexts">SECURE-CONTEXTS</a></cite>] because
          it exposes a feature to web applications that user agents usually
          offer natively on all media regardless of the <a data-type="dfn" href="https://html.spec.whatwg.org/multipage/document-sequences.html#browsing-context">browsing context</a>.
          A user agent can limit the API to [<cite><a class="bibref" data-link-type="biblio" href="#bib-secure-contexts" title="Secure Contexts">SECURE-CONTEXTS</a></cite>] by always
          returning an empty list as part of the <a href="#dfn-monitor-the-list-of-available-remote-playback-devices" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-19">monitor the list of
          available remote playback devices</a> algorithm in contexts that are
	  not secure.
        </p>
      </section>
    </section>
    <section class="appendix" id="candidate-recommendation-exit-criteria"><div class="header-wrapper"><h2 id="a-candidate-recommendation-exit-criteria"><bdi class="secno">A. </bdi>
        Candidate Recommendation exit criteria
      </h2><a class="self-link" href="#candidate-recommendation-exit-criteria" aria-label="Permalink for Appendix A."></a></div>
      
      <p>
        For this specification to be advanced to Proposed Recommendation, there
        must be at least two independent, interoperable implementations of each
        feature. Each feature may be implemented by a different set of
        products, there is no requirement that all features be implemented by a
        single product. Additionally, implementations must demonstrate support
        for the <a href="#dfn-media-remoting" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-remoting-2">media remoting</a> and <a href="#dfn-media-flinging" class="internalDFN" data-link-type="dfn" id="ref-for-dfn-media-flinging-3">media flinging</a> cases, either
        within the same product or within different products.
      </p>
      <p>
        For the purposes of these criteria, we define the following terms:
      </p>
      <dl>
        <dt>
          Independent
        </dt>
        <dd>
          Each implementation must be developed by a different party, and
          cannot share, reuse, or derive from code used by another qualifying
          implementation. Sections of code that have no bearing on the
          implementation of this specification are exempt from this
          requirement.
        </dd>
        <dt>
          Interoperable
        </dt>
        <dd>
          Passing the respective test case(s) in the official test suite.
        </dd>
        <dt>
          Implementation
        </dt>
        <dd>
          A user agent which:
          <ol>
            <li>implements the specification.
            </li>
            <li>is available to the general public. The implementation may be a
            shipping product or other publicly available version (i.e., beta
            version, preview release, or "nightly build"). Non-shipping product
            releases must have implemented the feature(s) for a period of at
            least one month in order to demonstrate stability.
            </li>
            <li>is not experimental (i.e. a version specifically designed to
            pass the test suite and not intended for normal usage going
            forward).
            </li>
          </ol>
        </dd>
      </dl>
    </section>
  

<section id="references" class="appendix"><div class="header-wrapper"><h2 id="b-references"><bdi class="secno">B. </bdi>References</h2><a class="self-link" href="#references" aria-label="Permalink for Appendix B."></a></div><section id="normative-references"><div class="header-wrapper"><h3 id="b-1-normative-references"><bdi class="secno">B.1 </bdi>Normative references</h3><a class="self-link" href="#normative-references" aria-label="Permalink for Appendix B.1"></a></div>
    
    <dl class="bibliography"><dt id="bib-dom">[dom]</dt><dd>
      <a href="https://dom.spec.whatwg.org/"><cite>DOM Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://dom.spec.whatwg.org/">https://dom.spec.whatwg.org/</a>
    </dd><dt id="bib-html">[HTML]</dt><dd>
      <a href="https://html.spec.whatwg.org/multipage/"><cite>HTML Standard</cite></a>. Anne van Kesteren; Domenic Denicola; Ian Hickson; Philip Jägenstedt; Simon Pieters.  WHATWG. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
    </dd><dt id="bib-presentation-api">[PRESENTATION-API]</dt><dd>
      <a href="https://www.w3.org/TR/presentation-api/"><cite>Presentation API</cite></a>. Mark Foltz; Dominik Röttsches.  W3C. 16 October 2023. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/presentation-api/">https://www.w3.org/TR/presentation-api/</a>
    </dd><dt id="bib-rfc2119">[RFC2119]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc2119"><cite>Key words for use in RFCs to Indicate Requirement Levels</cite></a>. S. Bradner.  IETF. March 1997. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>
    </dd><dt id="bib-rfc8174">[RFC8174]</dt><dd>
      <a href="https://www.rfc-editor.org/rfc/rfc8174"><cite>Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</cite></a>. B. Leiba.  IETF. May 2017. Best Current Practice. URL: <a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>
    </dd><dt id="bib-webidl">[WEBIDL]</dt><dd>
      <a href="https://webidl.spec.whatwg.org/"><cite>Web IDL Standard</cite></a>. Edgar Chen; Timothy Gu.  WHATWG. Living Standard. URL: <a href="https://webidl.spec.whatwg.org/">https://webidl.spec.whatwg.org/</a>
    </dd></dl>
  </section><section id="informative-references"><div class="header-wrapper"><h3 id="b-2-informative-references"><bdi class="secno">B.2 </bdi>Informative references</h3><a class="self-link" href="#informative-references" aria-label="Permalink for Appendix B.2"></a></div>
    
    <dl class="bibliography"><dt id="bib-secure-contexts">[SECURE-CONTEXTS]</dt><dd>
      <a href="https://www.w3.org/TR/secure-contexts/"><cite>Secure Contexts</cite></a>. Mike West.  W3C. 10 November 2023. W3C Candidate Recommendation. URL: <a href="https://www.w3.org/TR/secure-contexts/">https://www.w3.org/TR/secure-contexts/</a>
    </dd><dt id="bib-url">[url]</dt><dd>
      <a href="https://url.spec.whatwg.org/"><cite>URL Standard</cite></a>. Anne van Kesteren.  WHATWG. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
    </dd></dl>
  </section></section><p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-media-mirroring" aria-label="Links in this document to definition: media mirroring">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-media-mirroring" aria-label="Permalink for definition: media mirroring. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-media-mirroring-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> 
    </li><li>
      <a href="#ref-for-dfn-media-mirroring-2" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-media-remoting" aria-label="Links in this document to definition: media remoting">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-media-remoting" aria-label="Permalink for definition: media remoting. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-media-remoting-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> 
    </li><li>
      <a href="#ref-for-dfn-media-remoting-2" title="§ A. Candidate Recommendation exit criteria">§ A. Candidate Recommendation exit criteria</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-media-flinging" aria-label="Links in this document to definition: media flinging">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-media-flinging" aria-label="Permalink for definition: media flinging. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-media-flinging-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> 
    </li><li>
      <a href="#ref-for-dfn-media-flinging-2" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> 
    </li><li>
      <a href="#ref-for-dfn-media-flinging-3" title="§ A. Candidate Recommendation exit criteria">§ A. Candidate Recommendation exit criteria</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-local-playback-device" aria-label="Links in this document to definition: local playback device">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-local-playback-device" aria-label="Permalink for definition: local playback device. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-local-playback-device-1" title="§ 5.1 Common idioms">§ 5.1 Common idioms</a> <a href="#ref-for-dfn-local-playback-device-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-local-playback-device-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-local-playback-device-4" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-local-playback-device-5" title="§ 6.4 Messaging between the local and remote playback devices">§ 6.4 Messaging between the local and remote playback devices</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-remote-playback-devices" aria-label="Links in this document to definition: remote playback device">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-remote-playback-devices" aria-label="Permalink for definition: remote playback device. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-remote-playback-devices-1" title="§ 2. Introduction">§ 2. Introduction</a> <a href="#ref-for-dfn-remote-playback-devices-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-devices-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-devices-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-devices-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-remote-playback-devices-6" title="Reference 6">(6)</a> <a href="#ref-for-dfn-remote-playback-devices-7" title="Reference 7">(7)</a> <a href="#ref-for-dfn-remote-playback-devices-8" title="Reference 8">(8)</a> <a href="#ref-for-dfn-remote-playback-devices-9" title="Reference 9">(9)</a> <a href="#ref-for-dfn-remote-playback-devices-10" title="Reference 10">(10)</a> <a href="#ref-for-dfn-remote-playback-devices-11" title="Reference 11">(11)</a> <a href="#ref-for-dfn-remote-playback-devices-12" title="Reference 12">(12)</a> <a href="#ref-for-dfn-remote-playback-devices-13" title="Reference 13">(13)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-14" title="§ 5.1 Common idioms">§ 5.1 Common idioms</a> <a href="#ref-for-dfn-remote-playback-devices-15" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-16" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> <a href="#ref-for-dfn-remote-playback-devices-17" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-18" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> <a href="#ref-for-dfn-remote-playback-devices-19" title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-devices-20" title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-devices-21" title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-devices-22" title="Reference 5">(5)</a> <a href="#ref-for-dfn-remote-playback-devices-23" title="Reference 6">(6)</a> <a href="#ref-for-dfn-remote-playback-devices-24" title="Reference 7">(7)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-25" title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the remote playback devices availability information</a> <a href="#ref-for-dfn-remote-playback-devices-26" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-27" title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing remote playback devices availability</a> <a href="#ref-for-dfn-remote-playback-devices-28" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-29" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> <a href="#ref-for-dfn-remote-playback-devices-30" title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-devices-31" title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-devices-32" title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-devices-33" title="Reference 5">(5)</a> <a href="#ref-for-dfn-remote-playback-devices-34" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-35" title="§ 5.2.3 The state attribute">§ 5.2.3 The state attribute</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-36" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> <a href="#ref-for-dfn-remote-playback-devices-37" title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-devices-38" title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-devices-39" title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-devices-40" title="Reference 5">(5)</a> <a href="#ref-for-dfn-remote-playback-devices-41" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-42" title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5 Browser initiated remote playback</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-43" title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback state</a> <a href="#ref-for-dfn-remote-playback-devices-44" title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-devices-45" title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-devices-46" title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-devices-47" title="Reference 5">(5)</a> <a href="#ref-for-dfn-remote-playback-devices-48" title="Reference 6">(6)</a> <a href="#ref-for-dfn-remote-playback-devices-49" title="Reference 7">(7)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-50" title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote playback device</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-51" title="§ 5.3.2 Disabling remote playback">§ 5.3.2 Disabling remote playback</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-52" title="§ 6.1 Personally identifiable information">§ 6.1 Personally identifiable information</a> <a href="#ref-for-dfn-remote-playback-devices-53" title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-devices-54" title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-devices-55" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-56" title="§ 6.2 User interface guidelines">§ 6.2 User interface guidelines</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-devices-57" title="§ 6.4 Messaging between the local and remote playback devices">§ 6.4 Messaging between the local and remote playback devices</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-media-element-state" aria-label="Links in this document to definition: media element state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-media-element-state" aria-label="Permalink for definition: media element state. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-media-element-state-1" title="§ 5.1 Common idioms">§ 5.1 Common idioms</a> <a href="#ref-for-dfn-media-element-state-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-media-element-state-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-media-element-state-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-media-element-state-5" title="Reference 5">(5)</a> <a href="#ref-for-dfn-media-element-state-6" title="Reference 6">(6)</a> 
    </li><li>
      <a href="#ref-for-dfn-media-element-state-7" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> <a href="#ref-for-dfn-media-element-state-8" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-media-element-state-9" title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback state</a> <a href="#ref-for-dfn-media-element-state-10" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-media-element-state-11" title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote playback device</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-local-playback-state" aria-label="Links in this document to definition: local playback state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-local-playback-state" aria-label="Permalink for definition: local playback state. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-local-playback-state-1" title="§ 5.2.3 The state attribute">§ 5.2.3 The state attribute</a> <a href="#ref-for-dfn-local-playback-state-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-local-playback-state-3" title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback state</a> <a href="#ref-for-dfn-local-playback-state-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-local-playback-state-5" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-local-playback-state-6" title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote playback device</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-remote-playback-state" aria-label="Links in this document to definition: remote playback state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-remote-playback-state" aria-label="Permalink for definition: remote playback state. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-remote-playback-state-1" title="§ 5.1 Common idioms">§ 5.1 Common idioms</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-state-2" title="§ 5.2.3 The state attribute">§ 5.2.3 The state attribute</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-state-3" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> <a href="#ref-for-dfn-remote-playback-state-4" title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-state-5" title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-state-6" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-state-7" title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback state</a> <a href="#ref-for-dfn-remote-playback-state-8" title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-state-9" title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-state-10" title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-state-11" title="Reference 5">(5)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback" aria-label="Links in this document to definition: RemotePlayback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplayback" aria-label="Permalink for definition: RemotePlayback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplayback-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> <a href="#ref-for-dom-remoteplayback-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-3" title="§ 5.2.1.1 The set of availability callbacks">§ 5.2.1.1 The set of availability callbacks</a> <a href="#ref-for-dom-remoteplayback-4" title="Reference 2">(2)</a> <a href="#ref-for-dom-remoteplayback-5" title="Reference 3">(3)</a> <a href="#ref-for-dom-remoteplayback-6" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-7" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> <a href="#ref-for-dom-remoteplayback-8" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-9" title="§ 5.2.3 The state attribute">§ 5.2.3 The state attribute</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-10" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-11" title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback state</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-12" title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote playback device</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-13" title="§ 5.2.8 Event Handlers">§ 5.2.8 Event Handlers</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-14" title="§ 5.3 Extensions to HTMLMediaElement">§ 5.3 Extensions to HTMLMediaElement</a> <a href="#ref-for-dom-remoteplayback-15" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-16" title="§ 5.3.2 Disabling remote playback">§ 5.3.2 Disabling remote playback</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplaybackstate" aria-label="Links in this document to definition: RemotePlaybackState">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplaybackstate" aria-label="Permalink for definition: RemotePlaybackState. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplaybackstate-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> <a href="#ref-for-dom-remoteplaybackstate-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplaybackstate-3" title="§ 5.2.3 The state attribute">§ 5.2.3 The state attribute</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplaybackavailabilitycallback" aria-label="Links in this document to definition: RemotePlaybackAvailabilityCallback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplaybackavailabilitycallback" aria-label="Permalink for definition: RemotePlaybackAvailabilityCallback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplaybackavailabilitycallback-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> <a href="#ref-for-dom-remoteplaybackavailabilitycallback-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplaybackavailabilitycallback-3" title="§ 5.2.1 Observing remote playback device availability">§ 5.2.1 Observing remote playback device availability</a> <a href="#ref-for-dom-remoteplaybackavailabilitycallback-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplaybackavailabilitycallback-5" title="§ 5.2.1.1 The set of availability callbacks">§ 5.2.1.1 The set of availability callbacks</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-remote-playback-device-availability" aria-label="Links in this document to definition: remote playback device availability">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-remote-playback-device-availability" aria-label="Permalink for definition: remote playback device availability. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-remote-playback-device-availability-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-set-of-availability-callbacks" aria-label="Links in this document to definition: set of availability callbacks">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-set-of-availability-callbacks" aria-label="Permalink for definition: set of availability callbacks. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-set-of-availability-callbacks-1" title="§ 5.2.1.1 The set of availability callbacks">§ 5.2.1.1 The set of availability callbacks</a> <a href="#ref-for-dfn-set-of-availability-callbacks-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-set-of-availability-callbacks-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-set-of-availability-callbacks-4" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-set-of-availability-callbacks-5" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> 
    </li><li>
      <a href="#ref-for-dfn-set-of-availability-callbacks-6" title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the remote playback devices availability information</a> 
    </li><li>
      <a href="#ref-for-dfn-set-of-availability-callbacks-7" title="§ 5.2.1.4 Monitoring the list of available remote playback devices">§ 5.2.1.4 Monitoring the list of available remote playback devices</a> <a href="#ref-for-dfn-set-of-availability-callbacks-8" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-set-of-availability-callbacks-9" title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing remote playback devices availability</a> <a href="#ref-for-dfn-set-of-availability-callbacks-10" title="Reference 2">(2)</a> <a href="#ref-for-dfn-set-of-availability-callbacks-11" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dfn-set-of-availability-callbacks-12" title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote playback device</a> 
    </li><li>
      <a href="#ref-for-dfn-set-of-availability-callbacks-13" title="§ 5.3.2 Disabling remote playback">§ 5.3.2 Disabling remote playback</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-watchavailability" aria-label="Links in this document to definition: watchAvailability()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplayback-watchavailability" aria-label="Permalink for definition: watchAvailability(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplayback-watchavailability-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-watchavailability-2" title="§ 5.2.1 Observing remote playback device availability">§ 5.2.1 Observing remote playback device availability</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-watchavailability-3" title="§ 5.2.1.1 The set of availability callbacks">§ 5.2.1.1 The set of availability callbacks</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-watchavailability-4" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-watchavailability-5" title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the remote playback devices availability information</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-watchavailability-6" title="§ 6.1 Personally identifiable information">§ 6.1 Personally identifiable information</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-global-set-of-availability-callbacks" aria-label="Links in this document to definition: global set of availability callbacks">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-global-set-of-availability-callbacks" aria-label="Permalink for definition: global set of availability callbacks. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-global-set-of-availability-callbacks-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> <a href="#ref-for-dfn-global-set-of-availability-callbacks-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-global-set-of-availability-callbacks-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-global-set-of-availability-callbacks-4" title="Reference 4">(4)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-list-of-available-remote-playback-devices" aria-label="Links in this document to definition: list of available remote playback devices">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-list-of-available-remote-playback-devices" aria-label="Permalink for definition: list of available remote playback devices. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-list-of-available-remote-playback-devices-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> 
    </li><li>
      <a href="#ref-for-dfn-list-of-available-remote-playback-devices-2" title="§ 5.2.1.4 Monitoring the list of available remote playback devices">§ 5.2.1.4 Monitoring the list of available remote playback devices</a> <a href="#ref-for-dfn-list-of-available-remote-playback-devices-3" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-list-of-available-remote-playback-devices-4" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> <a href="#ref-for-dfn-list-of-available-remote-playback-devices-5" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-compatible-remote-playback-device" aria-label="Links in this document to definition: compatible remote playback device">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-compatible-remote-playback-device" aria-label="Permalink for definition: compatible remote playback device. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-compatible-remote-playback-device-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> <a href="#ref-for-dfn-compatible-remote-playback-device-2" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-availability-sources-set" aria-label="Links in this document to definition: availability sources set">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-availability-sources-set" aria-label="Permalink for definition: availability sources set. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-availability-sources-set-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> <a href="#ref-for-dfn-availability-sources-set-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-availability-sources-set-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-availability-sources-set-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-availability-sources-set-5" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-dfn-availability-sources-set-6" title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing remote playback devices availability</a> 
    </li><li>
      <a href="#ref-for-dfn-availability-sources-set-7" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-remote-playback-source" aria-label="Links in this document to definition: remote playback source">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-remote-playback-source" aria-label="Permalink for definition: remote playback source. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-remote-playback-source-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> <a href="#ref-for-dfn-remote-playback-source-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-remote-playback-source-3" title="Reference 3">(3)</a> <a href="#ref-for-dfn-remote-playback-source-4" title="Reference 4">(4)</a> <a href="#ref-for-dfn-remote-playback-source-5" title="Reference 5">(5)</a> 
    </li><li>
      <a href="#ref-for-dfn-remote-playback-source-6" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-unavailable" aria-label="Links in this document to definition: unavailable">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-unavailable" aria-label="Permalink for definition: unavailable. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-unavailable-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> 
    </li><li>
      <a href="#ref-for-dfn-unavailable-2" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-available" aria-label="Links in this document to definition: available">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-available" aria-label="Permalink for definition: available. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-available-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-availability" aria-label="Links in this document to definition: availability">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-availability" aria-label="Permalink for definition: availability. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-availability-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> 
    </li><li>
      <a href="#ref-for-dfn-availability-2" title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the remote playback devices availability information</a> 
    </li><li>
      <a href="#ref-for-dfn-availability-3" title="§ 5.2.1.4 Monitoring the list of available remote playback devices">§ 5.2.1.4 Monitoring the list of available remote playback devices</a> <a href="#ref-for-dfn-availability-4" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-monitor-the-list-of-available-remote-playback-devices" aria-label="Links in this document to definition: monitor the list of available remote playback devices">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-monitor-the-list-of-available-remote-playback-devices" aria-label="Permalink for definition: monitor the list of available remote playback devices. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-1" title="§ 5.2.1 Observing remote playback device availability">§ 5.2.1 Observing remote playback device availability</a> 
    </li><li>
      <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-2" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-4" title="Reference 3">(3)</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-5" title="Reference 4">(4)</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-6" title="Reference 5">(5)</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-7" title="Reference 6">(6)</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-8" title="Reference 7">(7)</a> 
    </li><li>
      <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-9" title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the remote playback devices availability information</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-10" title="Reference 2">(2)</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-11" title="Reference 3">(3)</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-12" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-13" title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing remote playback devices availability</a> 
    </li><li>
      <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-14" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-15" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-16" title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote playback device</a> 
    </li><li>
      <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-17" title="§ 6.1 Personally identifiable information">§ 6.1 Personally identifiable information</a> <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-18" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-monitor-the-list-of-available-remote-playback-devices-19" title="§ 6.5 Secure Contexts">§ 6.5 Secure Contexts</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-cancelwatchavailability" aria-label="Links in this document to definition: cancelWatchAvailability()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplayback-cancelwatchavailability" aria-label="Permalink for definition: cancelWatchAvailability(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplayback-cancelwatchavailability-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-prompt" aria-label="Links in this document to definition: prompt()">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplayback-prompt" aria-label="Permalink for definition: prompt(). Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplayback-prompt-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-prompt-2" title="§ 5.2.1 Observing remote playback device availability">§ 5.2.1 Observing remote playback device availability</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-prompt-3" title="§ 5.2.1.4 Monitoring the list of available remote playback devices">§ 5.2.1.4 Monitoring the list of available remote playback devices</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-prompt-4" title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing remote playback devices availability</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-prompt-5" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> <a href="#ref-for-dom-remoteplayback-prompt-6" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-prompt-7" title="§ 5.2.3 The state attribute">§ 5.2.3 The state attribute</a> <a href="#ref-for-dom-remoteplayback-prompt-8" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-change-remote-playback-state" aria-label="Links in this document to definition: change remote playback state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-change-remote-playback-state" aria-label="Permalink for definition: change remote playback state. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-change-remote-playback-state-1" title="§ 6.2 User interface guidelines">§ 6.2 User interface guidelines</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-initiate-remote-playback" aria-label="Links in this document to definition: initiate remote playback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-initiate-remote-playback" aria-label="Permalink for definition: initiate remote playback. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-initiate-remote-playback-1" title="§ 5.2.1.2 The list of available remote playback devices">§ 5.2.1.2 The list of available remote playback devices</a> <a href="#ref-for-dfn-initiate-remote-playback-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-initiate-remote-playback-3" title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the remote playback devices availability information</a> 
    </li><li>
      <a href="#ref-for-dfn-initiate-remote-playback-4" title="§ 5.2.3 The state attribute">§ 5.2.3 The state attribute</a> <a href="#ref-for-dfn-initiate-remote-playback-5" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-state" aria-label="Links in this document to definition: state">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplayback-state" aria-label="Permalink for definition: state. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplayback-state-1" title="§ 5.1 Common idioms">§ 5.1 Common idioms</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-state-2" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-state-3" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> <a href="#ref-for-dom-remoteplayback-state-4" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-state-5" title="§ 5.2.3 The state attribute">§ 5.2.3 The state attribute</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-state-6" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> <a href="#ref-for-dom-remoteplayback-state-7" title="Reference 2">(2)</a> <a href="#ref-for-dom-remoteplayback-state-8" title="Reference 3">(3)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-state-9" title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5 Browser initiated remote playback</a> <a href="#ref-for-dom-remoteplayback-state-10" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-state-11" title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback state</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-state-12" title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote playback device</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplayback-state-13" title="§ 5.3.2 Disabling remote playback">§ 5.3.2 Disabling remote playback</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplaybackstate-connecting" aria-label="Links in this document to definition: connecting">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplaybackstate-connecting" aria-label="Permalink for definition: connecting. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplaybackstate-connecting-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplaybackstate-connecting-2" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplaybackstate-connecting-3" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplaybackstate-connecting-4" title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5 Browser initiated remote playback</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplaybackstate-connected" aria-label="Links in this document to definition: connected">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplaybackstate-connected" aria-label="Permalink for definition: connected. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplaybackstate-connected-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplaybackstate-connected-2" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> <a href="#ref-for-dom-remoteplaybackstate-connected-3" title="Reference 2">(2)</a> <a href="#ref-for-dom-remoteplaybackstate-connected-4" title="Reference 3">(3)</a> <a href="#ref-for-dom-remoteplaybackstate-connected-5" title="Reference 4">(4)</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplaybackstate-connected-6" title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback state</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplaybackstate-disconnected" aria-label="Links in this document to definition: disconnected">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplaybackstate-disconnected" aria-label="Permalink for definition: disconnected. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplaybackstate-disconnected-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li><li>
      <a href="#ref-for-dom-remoteplaybackstate-disconnected-2" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-establish-a-connection-with-the-remote-playback-device" aria-label="Links in this document to definition: establish a connection with the remote playback device">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-establish-a-connection-with-the-remote-playback-device" aria-label="Permalink for definition: establish a connection with the remote playback device. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-establish-a-connection-with-the-remote-playback-device-1" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> 
    </li><li>
      <a href="#ref-for-dfn-establish-a-connection-with-the-remote-playback-device-2" title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5 Browser initiated remote playback</a> <a href="#ref-for-dfn-establish-a-connection-with-the-remote-playback-device-3" title="Reference 2">(2)</a> <a href="#ref-for-dfn-establish-a-connection-with-the-remote-playback-device-4" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-browser-initiated-remote-playback" aria-label="Links in this document to definition: browser initiated remote playback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-browser-initiated-remote-playback" aria-label="Permalink for definition: browser initiated remote playback. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-browser-initiated-remote-playback-1" title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5 Browser initiated remote playback</a> <a href="#ref-for-dfn-browser-initiated-remote-playback-2" title="Reference 2">(2)</a> <a href="#ref-for-dfn-browser-initiated-remote-playback-3" title="Reference 3">(3)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-disconnect-from-a-remote-playback-device" aria-label="Links in this document to definition: disconnect from a remote playback device">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-disconnect-from-a-remote-playback-device" aria-label="Permalink for definition: disconnect from a remote playback device. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-1" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-2" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-3" title="§ 5.2.5 Browser initiated remote playback">§ 5.2.5 Browser initiated remote playback</a> 
    </li><li>
      <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-4" title="§ 5.2.6 Media commands and media playback state">§ 5.2.6 Media commands and media playback state</a> 
    </li><li>
      <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-5" title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote playback device</a> 
    </li><li>
      <a href="#ref-for-dfn-disconnect-from-a-remote-playback-device-6" title="§ 5.3.2 Disabling remote playback">§ 5.3.2 Disabling remote playback</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-onconnecting" aria-label="Links in this document to definition: onconnecting">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplayback-onconnecting" aria-label="Permalink for definition: onconnecting. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplayback-onconnecting-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-connecting" aria-label="Links in this document to definition: connecting">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-connecting" aria-label="Permalink for definition: connecting. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-connecting-1" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-onconnect" aria-label="Links in this document to definition: onconnect">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplayback-onconnect" aria-label="Permalink for definition: onconnect. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplayback-onconnect-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-connect" aria-label="Links in this document to definition: connect">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-connect" aria-label="Permalink for definition: connect. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-connect-1" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-remoteplayback-ondisconnect" aria-label="Links in this document to definition: ondisconnect">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-remoteplayback-ondisconnect" aria-label="Permalink for definition: ondisconnect. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1015675303">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-remoteplayback-ondisconnect-1" title="§ 5.2 RemotePlayback interface">§ 5.2 RemotePlayback interface</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-disconnect" aria-label="Links in this document to definition: disconnect">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-disconnect" aria-label="Permalink for definition: disconnect. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-disconnect-1" title="§ 5.2.4 Establishing a connection with a remote playback device">§ 5.2.4 Establishing a connection with a remote playback device</a> 
    </li><li>
      <a href="#ref-for-dfn-disconnect-2" title="§ 5.2.7 Disconnecting from a remote playback device">§ 5.2.7 Disconnecting from a remote playback device</a> <a href="#ref-for-dfn-disconnect-3" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlmediaelement-remote" aria-label="Links in this document to definition: remote">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-htmlmediaelement-remote" aria-label="Permalink for definition: remote. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1396475025">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-htmlmediaelement-remote-1" title="§ 5.2.1.1 The set of availability callbacks">§ 5.2.1.1 The set of availability callbacks</a> 
    </li><li>
      <a href="#ref-for-dom-htmlmediaelement-remote-2" title="§ 5.3 Extensions to HTMLMediaElement">§ 5.3 Extensions to HTMLMediaElement</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dom-htmlmediaelement-disableremoteplayback" aria-label="Links in this document to definition: disableRemotePlayback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dom-htmlmediaelement-disableremoteplayback" aria-label="Permalink for definition: disableRemotePlayback. Activate to close this dialog.">Permalink</a>
        <span class="marker dfn-exported" title="Definition can be referenced by other specifications">exported</span> <a class="marker idl-block" title="Jump to IDL declaration" href="#webidl-1396475025">IDL</a>
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-1" title="§ 5.2.1.3 Getting the remote playback devices availability information">§ 5.2.1.3 Getting the remote playback devices availability information</a> 
    </li><li>
      <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-2" title="§ 5.2.1.4 Monitoring the list of available remote playback devices">§ 5.2.1.4 Monitoring the list of available remote playback devices</a> 
    </li><li>
      <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-3" title="§ 5.2.1.5 Stop observing remote playback devices availability">§ 5.2.1.5 Stop observing remote playback devices availability</a> 
    </li><li>
      <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-4" title="§ 5.2.2 Prompt user for changing remote playback state">§ 5.2.2 Prompt user for changing remote playback state</a> 
    </li><li>
      <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-5" title="§ 5.3 Extensions to HTMLMediaElement">§ 5.3 Extensions to HTMLMediaElement</a> 
    </li><li>
      <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-6" title="§ 5.3.1 The disableRemotePlayback attribute">§ 5.3.1 The disableRemotePlayback attribute</a> <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-7" title="Reference 2">(2)</a> 
    </li><li>
      <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-8" title="§ 5.3.2 Disabling remote playback">§ 5.3.2 Disabling remote playback</a> <a href="#ref-for-dom-htmlmediaelement-disableremoteplayback-9" title="Reference 2">(2)</a> 
    </li>
  </ul>
    </div><div class="dfn-panel" hidden="" role="dialog" aria-modal="true" id="dfn-panel-for-dfn-disable-remote-playback" aria-label="Links in this document to definition: disable remote playback">
      <span class="caret"></span>
      <div>
        <a class="self-link" href="#dfn-disable-remote-playback" aria-label="Permalink for definition: disable remote playback. Activate to close this dialog.">Permalink</a>
         
      </div>
      <p><b>Referenced in:</b></p>
      <ul>
    <li>
      <a href="#ref-for-dfn-disable-remote-playback-1" title="§ 5.3.1 The disableRemotePlayback attribute">§ 5.3.1 The disableRemotePlayback attribute</a> 
    </li>
  </ul>
    </div><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script></body></html>